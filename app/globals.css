:root{
  --ui-scale:0.9;
  --green:#0F766E;
  --green-hover:#0D615B;
  --green-soft:#CCFBF1;
  --text:#0F172A;
  --text-muted:#7A8CA3;
  --border:#E2E8F0;
  --ink:#0A0F1C;
  --ink-soft:#1E293B;
  --radius:calc(18px * var(--ui-scale));
  --shadow:0 12px 22px rgba(15,23,42,0.08), 0 2px 6px rgba(15,23,42,0.05);
  --panel-surface:#FFFFFF;
  --card-surface:var(--panel-surface);
  --card-border:1px solid rgba(15,118,110,0.2);
  --star-fill:#22C55E;
  --star-empty:#E5E7EB;

  --orange:#16A34A;
  --beige:#ECFDF5;
  --brown:#1F2937;

  --maxw:1200px;
  --feature-minw:600px;
  --feature-gap:calc(40px * var(--ui-scale));
  --feature-pad:calc(60px * var(--ui-scale));
  --feature-minh:calc(300px * var(--ui-scale));

  --gold:#F4C95D;
  --gold-strong:#FBBF24;
  --neon-pink:#F472B6;
  --neon-blue:#38BDF8;
  --neon-green:#34D399;
}

*{ box-sizing:border-box }

html,body{
  margin:0;
  background:#F8FAFC;
  background-image:
    radial-gradient(1200px 520px at 0% -10%, rgba(15,118,110,0.12), transparent 60%),
    radial-gradient(900px 520px at 92% 0%, rgba(16,185,129,0.14), transparent 55%),
    linear-gradient(to bottom, rgba(248,250,252,0.98), rgba(255,255,255,1));
  color:var(--text);
  font:calc(15px * var(--ui-scale))/1.65 var(--font-body), "Space Grotesk", sans-serif;
  overflow-x:hidden;
}

body{
  position:relative;
}

body::before{
  content:"";
  position:fixed;
  inset:0;
  background-image:url("/assets/quest-pattern.png");
  background-repeat:repeat;
  background-size:420px 420px;
  opacity:0.22;
  pointer-events:none;
  z-index:0;
}
@media (max-width: 640px){
  body::before{ opacity:0.14; }
}
@media (max-width: 640px){
  :root{
    --text-muted:#5E6F86;
  }
}

body > *{
  position:relative;
  z-index:1;
}

a{ text-decoration:none; color:var(--green) }

.container{ max-width:var(--maxw); margin:0 auto; padding:0 calc(24px * var(--ui-scale)) }
@media (max-width: 640px){
  .container{ padding:0 calc(16px * var(--ui-scale)); }
}

/* ================= RunePrep layout ================= */
.page{ padding:calc(48px * var(--ui-scale)) 0 calc(72px * var(--ui-scale)); }
.page-header{ display:flex; align-items:flex-end; justify-content:space-between; gap:16px; flex-wrap:wrap; }
.page-title{
  font-size:clamp(calc(26px * var(--ui-scale)), calc(3.6vw * var(--ui-scale)), calc(40px * var(--ui-scale)));
  font-weight:900;
  margin:0;
  color:var(--ink);
  font-family:var(--font-display), var(--font-body), sans-serif;
  letter-spacing:0.02em;
  line-height:1.2;
}
.page-sub{ margin:8px 0 0; color:var(--text-muted); max-width:720px; }
.stack{ display:flex; flex-direction:column; gap:calc(16px * var(--ui-scale)); }
.home{ gap:calc(56px * var(--ui-scale)); }
.home > section{ position:relative; }
.home > section,
.page > section{
  scroll-margin-top:140px;
}
@media (max-width: 640px){
  .page{ padding:calc(20px * var(--ui-scale)) 0 calc(40px * var(--ui-scale)); }
  .home{ gap:calc(32px * var(--ui-scale)); }
  .page-title{
    font-size:clamp(calc(20px * var(--ui-scale)), calc(6.2vw * var(--ui-scale)), calc(24px * var(--ui-scale)));
    line-height:1.15;
    max-width:22ch;
    text-wrap:balance;
    letter-spacing:0.01em;
  }
  .page-sub{
    font-size:14px;
    line-height:1.55;
    max-width:42ch;
  }
  .page-header{ align-items:flex-start; }
  .page-header .btn{ width:100%; text-align:center; }
  .home > section,
  .page > section{
    scroll-margin-top:110px;
  }
}
@media (max-width: 420px){
  .page-title{ font-size:clamp(calc(20px * var(--ui-scale)), calc(7.8vw * var(--ui-scale)), calc(26px * var(--ui-scale))); }
}
.section-divider{
  position:absolute;
  left:50%;
  top:0;
  width:100vw;
  height:28px;
  transform:translate(-50%, -50%);
  pointer-events:none;
  z-index:70;
}
.section-divider-wrap{
  position:relative;
  height:0;
  margin:0;
  padding:0;
  z-index:70;
  overflow:visible;
}
.section-divider::before{
  content:"";
  position:absolute;
  left:0;
  right:0;
  top:50%;
  height:8px;
  transform:translateY(-50%);
  background:linear-gradient(90deg,
    rgba(112,76,26,0) 0%,
    #8B5C24 12%,
    #C88F3B 32%,
    #F1C66D 50%,
    #C88F3B 68%,
    #8B5C24 88%,
    rgba(112,76,26,0) 100%);
  border-top:1px solid rgba(255,236,196,0.9);
  border-bottom:1px solid rgba(79,49,17,0.9);
  border-radius:999px;
  box-shadow:0 3px 8px rgba(30,18,7,0.22);
}
.section-divider::after{
  content:"";
  position:absolute;
  left:50%;
  top:50%;
  width:28px;
  height:28px;
  transform:translate(-50%, -50%) rotate(45deg);
  background:
    linear-gradient(135deg, rgba(255,255,255,0.6), rgba(255,255,255,0) 45%),
    radial-gradient(circle at 30% 30%, #8FE7FF, #2AA7D8 55%, #0C3B6A 100%);
  border:2px solid #C78F39;
  box-shadow:
    0 0 0 3px rgba(199,143,57,0.35),
    0 6px 12px rgba(10,12,18,0.25);
}
@media (max-width: 700px){
  .section-divider{
    top:0;
    height:22px;
  }
  .section-divider-wrap{ height:0; }
  .section-divider::before{
    top:50%;
    height:6px;
  }
  .section-divider::after{
    top:50%;
    width:20px;
    height:20px;
    transform:translate(-50%, -50%) rotate(45deg);
    box-shadow:
      0 0 0 2px rgba(199,143,57,0.35),
      0 5px 10px rgba(10,12,18,0.22);
  }
}
.row{ display:flex; gap:calc(16px * var(--ui-scale)); flex-wrap:wrap; align-items:center; }
.deck-cta-row{ gap:calc(12px * var(--ui-scale)); }
.grid-2{ display:grid; grid-template-columns:repeat(2, minmax(0, 1fr)); gap:calc(16px * var(--ui-scale)); }
.grid-3{ display:grid; grid-template-columns:repeat(3, minmax(0, 1fr)); gap:calc(16px * var(--ui-scale)); }
@media (max-width: 900px){
  .grid-2,.grid-3{ grid-template-columns:1fr; }
}
@media (max-width: 640px){
  .deck-cta-row{
    flex-direction:column;
    align-items:stretch;
  }
  .deck-cta-row .btn{
    width:100%;
    text-align:center;
  }
  .deck-cta-row .muted{
    font-size:12px;
  }
}
.card{
  position:relative;
  background:var(--card-surface);
  border:var(--card-border);
  border-radius:var(--radius);
  padding:calc(22px * var(--ui-scale));
  overflow:hidden;
  box-shadow:var(--shadow);
}
@media (max-width: 640px){
  .card{
    padding:calc(16px * var(--ui-scale));
    box-shadow:0 10px 18px rgba(15,23,42,0.08);
  }
}
.card--error{
  border-color:#fca5a5;
  background:#fef2f2;
  color:#7f1d1d;
}
.card.card--plain{
  background:#fff;
  border:1px solid var(--border);
  box-shadow:none;
}
.card.card--plain::before,
.card.card--plain::after{
  display:none;
}
button.card{ cursor:pointer; font:inherit; }
button.card:disabled{ cursor:not-allowed; opacity:0.6; }
.card-title{
  font-weight:800;
  margin:0 0 6px;
  color:var(--ink);
  letter-spacing:0.02em;
  font-family:var(--font-display), var(--font-body), sans-serif;
}
.party-question-text{
  font-size:clamp(calc(20px * var(--ui-scale)), calc(2.6vw * var(--ui-scale)), calc(30px * var(--ui-scale)));
  line-height:1.5;
  font-weight:700;
  font-family:var(--font-body), "Space Grotesk", sans-serif;
  letter-spacing:0;
  max-height:12.5em;
  overflow-y:auto;
  padding-right:6px;
}
.pixel-ui .party-question-text{
  font-family:var(--font-body), "Space Grotesk", sans-serif;
  letter-spacing:0;
  text-transform:none;
  -webkit-font-smoothing:antialiased;
  text-rendering:optimizeLegibility;
}
@media (max-width: 640px){
  .party-question-text{
    font-size:18px;
    line-height:1.55;
    max-height:13.5em;
  }
}
.card-sub{ margin:0; color:var(--text-muted); }
.muted{ color:var(--text-muted); }
.badge{
  display:inline-flex;
  align-items:center;
  gap:6px;
  padding:calc(4px * var(--ui-scale)) calc(10px * var(--ui-scale));
  border-radius:999px;
  border:1px solid var(--border);
  background:var(--green-soft);
  color:var(--ink);
  font-size:calc(11px * var(--ui-scale));
  font-weight:700;
  font-family:var(--font-body), sans-serif;
  letter-spacing:0.06em;
  text-transform:uppercase;
  line-height:1;
}
.badge-soft{
  border-color:var(--border);
  background:#ECFDF5;
}
.input,
.textarea{
  width:100%;
  border:1px solid var(--border);
  border-radius:12px;
  padding:calc(10px * var(--ui-scale)) calc(12px * var(--ui-scale));
  font-size:calc(15px * var(--ui-scale));
  color:var(--text);
  background:#fff;
}
.textarea{ min-height:calc(140px * var(--ui-scale)); resize:vertical; }
.input:focus,
.textarea:focus{
  border-color:var(--green);
  outline:none;
  box-shadow:none;
}
.field{ display:flex; flex-direction:column; gap:calc(8px * var(--ui-scale)); }
.field-label{ font-weight:700; color:var(--text); }
.field-help{ color:var(--text-muted); font-size:calc(13px * var(--ui-scale)); }
.divider{ height:1px; background:var(--border); width:100%; }
.scoreboard{ display:flex; flex-direction:column; gap:calc(10px * var(--ui-scale)); }
.score-row{
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:calc(10px * var(--ui-scale)) calc(12px * var(--ui-scale));
  border:1px solid var(--border);
  border-radius:12px;
  background:#fff;
  box-shadow:0 10px 22px rgba(15,23,42,0.08);
}
.score-row.is-host{
  border-color:var(--green);
  background:rgba(15,118,110,0.12);
  animation:hostPulse 2.4s ease-in-out infinite;
}
.score-row.is-inactive{
  opacity:0.65;
}
.scoreboard.results .score-row{
  animation:scoreReveal .45s ease both;
}
.scoreboard.results .score-row:nth-child(2){ animation-delay:80ms; }
.scoreboard.results .score-row:nth-child(3){ animation-delay:160ms; }
.scoreboard.results .score-row:nth-child(4){ animation-delay:240ms; }
.scoreboard.results .score-row:nth-child(5){ animation-delay:320ms; }
.progress{ height:calc(8px * var(--ui-scale)); background:var(--border); border-radius:999px; overflow:hidden; }
.progress > span{ display:block; height:100%; background:var(--green); }
.avatar{
  width:36px;
  height:36px;
  border-radius:12px;
  object-fit:contain;
  border:1px solid var(--border);
  background:#fff;
  image-rendering:pixelated;
}
.avatar-lg{
  width:64px;
  height:64px;
}
.avatar-grid{
  display:grid;
  grid-template-columns:repeat(auto-fit, minmax(190px, 1fr));
  gap:16px;
}
.avatar-tile{
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:8px;
  padding:16px 12px;
  min-height:220px;
  border-radius:14px;
  border:2px solid transparent;
  background:transparent;
  cursor:pointer;
  font:inherit;
  transition:transform .12s ease, box-shadow .12s ease, background .12s ease;
}
.avatar-tile .avatar{
  width:100%;
  max-width:260px;
  aspect-ratio:1 / 1;
  height:auto;
  border:none;
  background:transparent;
}
.avatar-tile.is-selected{
  border-color:var(--green);
  background:transparent;
}
.avatar-tile:disabled{
  cursor:not-allowed;
  opacity:0.6;
}
.avatar-tile:not(:disabled):hover{
  transform:translateY(-2px);
  box-shadow:2px 2px 0 rgba(15,23,42,0.12);
}
.dashboard .avatar-tile:not(:disabled):hover{
  border-color:rgba(244,201,93,0.95);
  box-shadow:
    0 0 0 3px rgba(244,201,93,0.35),
    0 0 18px rgba(244,201,93,0.6);
}
.dashboard .avatar-tile:not(:disabled):hover .avatar{
  filter:drop-shadow(0 0 14px rgba(244,201,93,0.75));
}
.join-party .avatar-tile:not(:disabled):hover{
  border-color:rgba(244,201,93,0.95);
  box-shadow:
    0 0 0 3px rgba(244,201,93,0.35),
    0 0 18px rgba(244,201,93,0.6);
}
.join-party .avatar-tile:not(:disabled):hover .avatar{
  filter:drop-shadow(0 0 14px rgba(244,201,93,0.75));
}
.join-party .avatar-tile{
  position:relative;
  overflow:hidden;
}
.avatar-label{
  font-size:14px;
  line-height:1.35;
  text-align:center;
  max-width:22ch;
  text-wrap:balance;
  color:var(--text-muted);
}
.avatar-tile:focus-visible{
  outline:3px solid rgba(34,197,94,0.45);
  outline-offset:2px;
  border-color:rgba(34,197,94,0.85);
}

.join-party .paladin-sunburst{
  position:fixed;
  inset:0;
  pointer-events:none;
  z-index:70;
  overflow:hidden;
}
.join-party .cinder-ember-fx{
  position:fixed;
  inset:0;
  pointer-events:none;
  z-index:69;
  overflow:hidden;
}
.join-party .knight-shield-fx{
  position:fixed;
  inset:0;
  pointer-events:none;
  z-index:68;
  overflow:hidden;
}
.join-party .spartan-dory-fx{
  position:fixed;
  inset:0;
  pointer-events:none;
  z-index:67;
  overflow:hidden;
}
.join-party .circe-assassin-fx{
  position:fixed;
  inset:0;
  pointer-events:none;
  z-index:71;
  overflow:hidden;
}
.join-party .rogue-claw-fx{
  position:fixed;
  inset:0;
  pointer-events:none;
  z-index:72;
  overflow:hidden;
}
.join-party .rogue-claw-fx__stroke{
  position:absolute;
  left:var(--origin-x);
  top:var(--origin-y);
  width:min(24vw, 220px);
  height:min(14vh, 120px);
  margin-left:calc(min(24vw, 220px) * -0.5);
  margin-top:calc(min(14vh, 120px) * -0.5);
  background:url("/assets/rogue-claw.png") center / contain no-repeat;
  filter:
    hue-rotate(-12deg)
    saturate(1.25)
    drop-shadow(0 0 10px rgba(255,98,98,0.88))
    drop-shadow(0 0 20px rgba(220,38,38,0.86));
  transform-origin:50% 50%;
  opacity:0;
  animation:rogueStrokeA 220ms cubic-bezier(.24,.78,.26,1) forwards;
}
.join-party .rogue-claw-fx__stroke--a{
  transform:rotate(45deg) translateY(-14vw) scale(0.1);
}
.join-party .rogue-claw-fx__stroke--b{
  transform:rotate(-45deg) translateY(-14vw) scale(0.1);
  animation:rogueStrokeB 220ms cubic-bezier(.24,.78,.26,1) 120ms forwards;
}

@keyframes rogueStrokeA{
  0%{
    opacity:0;
    transform:rotate(45deg) translateY(-14vw) scale(0.1);
  }
  20%{
    opacity:1;
    transform:rotate(45deg) translateY(0) scale(1);
  }
  100%{
    opacity:0;
    transform:rotate(45deg) translateY(14vw) scale(1.04);
  }
}

@keyframes rogueStrokeB{
  0%{
    opacity:0;
    transform:rotate(-45deg) translateY(-14vw) scale(0.1);
  }
  20%{
    opacity:1;
    transform:rotate(-45deg) translateY(0) scale(1);
  }
  100%{
    opacity:0;
    transform:rotate(-45deg) translateY(14vw) scale(1.04);
  }
}
.join-party .circe-assassin-fx__rune{
  position:absolute;
  left:var(--origin-x);
  top:var(--origin-y);
  width:340px;
  height:340px;
  margin-left:-170px;
  margin-top:-170px;
  opacity:0;
  background:url("/assets/circe-rune.png") center / contain no-repeat;
  filter:drop-shadow(0 0 20px rgba(122,214,168,0.72)) hue-rotate(16deg) saturate(1.2);
  animation:circeRuneCast 520ms ease-out forwards;
  z-index:1;
}
.join-party .circe-assassin-fx__rune--echo{
  width:420px;
  height:420px;
  margin-left:-210px;
  margin-top:-210px;
  opacity:0;
  filter:drop-shadow(0 0 26px rgba(126,227,183,0.6)) hue-rotate(20deg) saturate(1.35);
  mix-blend-mode:screen;
  animation:circeRuneEcho 520ms ease-out forwards;
  z-index:1;
}
.join-party .circe-assassin-fx__aura{
  position:absolute;
  left:var(--origin-x);
  top:var(--origin-y);
  width:210px;
  height:210px;
  margin-left:-105px;
  margin-top:-105px;
  border-radius:999px;
  opacity:0;
  background:
    radial-gradient(circle, rgba(216,255,241,0.72) 0%, rgba(93,210,169,0.38) 46%, rgba(93,210,169,0) 74%),
    conic-gradient(from 0deg, rgba(93,210,169,0.12), rgba(203,255,236,0.45), rgba(93,210,169,0.12));
  filter:blur(1px);
  animation:circeAuraWave 520ms ease-out forwards;
  z-index:0;
}
.join-party .circe-assassin-fx__blade{
  position:absolute;
  left:var(--origin-x);
  top:var(--origin-y);
  width:min(20vw, 220px);
  height:min(10vh, 96px);
  margin-left:calc(min(20vw, 220px) * -0.1);
  margin-top:calc(min(10vh, 96px) * -0.5);
  opacity:0;
  background:url("/assets/circe-dagger.png") center / contain no-repeat;
  transform-origin:0 50%;
  --mirror: 1;
  transform:rotate(var(--angle)) translateX(var(--start-distance)) scaleX(var(--mirror)) scaleY(1) scale(var(--scale));
  filter:drop-shadow(0 0 12px rgba(136,239,192,0.62));
  animation:circeBladeBurst 460ms cubic-bezier(.2,.76,.24,1) var(--delay) forwards;
  z-index:4;
}
.join-party .circe-assassin-fx__blade--mirrored{
  --mirror: -1;
}

@keyframes circeRuneCast{
  0%{
    opacity:0;
    transform:scale(0.54) rotate(-20deg);
  }
  22%{
    opacity:1;
    transform:scale(1.02) rotate(-4deg);
  }
  100%{
    opacity:0;
    transform:scale(1.34) rotate(20deg);
  }
}

@keyframes circeRuneEcho{
  0%{
    opacity:0;
    transform:scale(0.58) rotate(10deg);
  }
  18%{
    opacity:0.8;
    transform:scale(1.02) rotate(18deg);
  }
  100%{
    opacity:0;
    transform:scale(1.28) rotate(44deg);
  }
}

@keyframes circeAuraWave{
  0%{
    opacity:0;
    transform:scale(0.66);
  }
  20%{
    opacity:0.9;
    transform:scale(1.02);
  }
  100%{
    opacity:0;
    transform:scale(1.4);
  }
}

@keyframes circeBladeBurst{
  0%{
    opacity:0;
    transform:rotate(var(--angle)) translateX(calc(var(--start-distance) - 4px)) scaleX(var(--mirror)) scaleY(1) scale(calc(var(--scale) * 0.74));
  }
  22%{
    opacity:1;
    transform:rotate(var(--angle)) translateX(calc(var(--start-distance) + 8px)) scaleX(var(--mirror)) scaleY(1) scale(var(--scale));
  }
  100%{
    opacity:0;
    transform:rotate(var(--angle)) translateX(calc(var(--start-distance) + var(--distance))) scaleX(var(--mirror)) scaleY(1) scale(calc(var(--scale) * 1.08));
  }
}

@keyframes circeShardBurst{
  0%{
    opacity:0;
    transform:rotate(var(--angle)) translateX(8px) scale(calc(var(--scale) * 0.7));
  }
  24%{
    opacity:0.88;
    transform:rotate(var(--angle)) translateX(18px) scale(var(--scale));
  }
  100%{
    opacity:0;
    transform:rotate(calc(var(--angle) + 24deg)) translateX(var(--distance)) scale(calc(var(--scale) * 1.08));
  }
}
.join-party .spartan-dory-fx__spear{
  position:absolute;
  left:var(--origin-x);
  top:var(--origin-y);
  width:min(26vw, 360px);
  height:min(12vh, 110px);
  margin-left:-8px;
  margin-top:calc(min(12vh, 110px) * -0.5);
  opacity:0;
  background:url("/assets/spartan-spear.png") center / contain no-repeat;
  transform-origin:0 50%;
  transform:rotate(var(--angle)) translateX(16px) scale(var(--scale));
  filter:drop-shadow(0 0 12px rgba(182,126,66,0.55));
  animation:spartanDorySpear 520ms cubic-bezier(.18,.74,.22,1) var(--delay) forwards;
}
.join-party .spartan-dory-fx__burst{
  position:absolute;
  left:var(--origin-x);
  top:var(--origin-y);
  width:220px;
  height:220px;
  margin-left:-110px;
  margin-top:-110px;
  opacity:0;
  border-radius:999px;
  background:
    radial-gradient(circle, rgba(255,244,217,0.8) 0%, rgba(230,172,91,0.45) 35%, rgba(230,172,91,0) 70%),
    url("/assets/spartan-trail.png") center / contain no-repeat;
  filter:blur(0.8px) saturate(0.95);
  mix-blend-mode:screen;
  animation:spartanDoryBurst 520ms ease-out forwards;
}

.join-party .spartan-dory-fx__dust{
  position:absolute;
  left:var(--origin-x);
  top:var(--origin-y);
  width:74px;
  height:74px;
  opacity:0;
  background:url("/assets/spartan-dust.png") center / contain no-repeat;
  filter:blur(0.2px) sepia(0.28) saturate(1.2) hue-rotate(-10deg);
  animation:spartanDoryDust 460ms ease-out forwards;
}
.join-party .spartan-dory-fx__dust--a{
  margin-left:-48px;
  margin-top:16px;
}
.join-party .spartan-dory-fx__dust--b{
  margin-left:-26px;
  margin-top:30px;
  animation-delay:50ms;
}

@keyframes spartanDorySpear{
  0%{
    opacity:0;
    transform:rotate(var(--angle)) translateX(10px) scale(calc(var(--scale) * 0.82));
  }
  18%{
    opacity:1;
    transform:rotate(var(--angle)) translateX(28px) scale(var(--scale));
  }
  100%{
    opacity:0;
    transform:rotate(var(--angle)) translateX(var(--distance)) scale(calc(var(--scale) * 1.08));
  }
}

@keyframes spartanDoryBurst{
  0%{
    opacity:0;
    transform:scale(0.7);
  }
  18%{
    opacity:0.92;
    transform:scale(1.06);
  }
  100%{
    opacity:0;
    transform:scale(1.4);
  }
}

@keyframes spartanDoryDust{
  0%{
    opacity:0;
    transform:translateX(0) scale(0.7);
  }
  18%{
    opacity:0.74;
    transform:translateX(2vw) scale(0.95);
  }
  100%{
    opacity:0;
    transform:translateX(12vw) translateY(-6px) scale(1.15);
  }
}

@media (max-width: 640px){
  .join-party .circe-assassin-fx__rune{
    width:270px;
    height:270px;
    margin-left:-135px;
    margin-top:-135px;
  }
  .join-party .circe-assassin-fx__rune--echo{
    width:320px;
    height:320px;
    margin-left:-160px;
    margin-top:-160px;
  }
  .join-party .spartan-dory-fx__spear{
    width:min(34vw, 220px);
    height:min(9vh, 72px);
    margin-top:calc(min(9vh, 72px) * -0.5);
  }
  .join-party .spartan-dory-fx__burst{
    width:170px;
    height:170px;
    margin-left:-85px;
    margin-top:-85px;
  }
  .join-party .water-mage-fx__sigil{
    width:260px;
    height:260px;
    margin-left:-130px;
    margin-top:-130px;
  }
}
.join-party .knight-shield-fx__slam{
  position:absolute;
  left:var(--origin-x);
  top:var(--origin-y);
  width:88px;
  height:110px;
  margin-left:-44px;
  margin-top:-55px;
  opacity:0;
  background:
    radial-gradient(circle at 50% 35%, rgba(248,250,252,0.98) 0 16px, rgba(248,250,252,0) 18px),
    linear-gradient(180deg, rgba(246,248,251,0.95) 0%, rgba(192,202,217,0.95) 56%, rgba(115,129,149,0.95) 100%);
  clip-path:polygon(50% 0%, 92% 20%, 92% 58%, 50% 100%, 8% 58%, 8% 20%);
  border:2px solid rgba(223,231,241,0.92);
  box-shadow:
    0 0 0 2px rgba(81,98,124,0.35),
    0 0 24px rgba(195,210,228,0.75);
  filter:drop-shadow(0 0 12px rgba(203,219,239,0.85));
  animation:knightShieldSlam 470ms cubic-bezier(.2,.78,.25,1) forwards;
}
.join-party .knight-shield-fx__ring{
  position:absolute;
  left:var(--origin-x);
  top:var(--origin-y);
  width:80px;
  height:80px;
  margin-left:-40px;
  margin-top:-40px;
  border-radius:999px;
  border:3px solid rgba(228,236,246,0.95);
  box-shadow:
    0 0 0 2px rgba(150,169,194,0.3),
    0 0 20px rgba(203,219,239,0.75);
  opacity:0;
  animation:knightShieldRing 470ms ease-out forwards;
}
.join-party .knight-shield-fx__ring--late{
  animation-delay:60ms;
}

@keyframes knightShieldSlam{
  0%{
    opacity:0;
    transform:translateY(-18px) scale(0.78);
  }
  24%{
    opacity:1;
    transform:translateY(0) scale(1.03);
  }
  100%{
    opacity:0;
    transform:translateY(4px) scale(1.18);
  }
}

@keyframes knightShieldRing{
  0%{
    opacity:0;
    transform:scale(0.72);
  }
  16%{
    opacity:0.98;
    transform:scale(0.95);
  }
  100%{
    opacity:0;
    transform:scale(3.8);
  }
}
.join-party .cinder-ember-fx__core{
  position:absolute;
  left:var(--origin-x);
  top:var(--origin-y);
  width:72px;
  height:72px;
  margin-left:-36px;
  margin-top:-36px;
  border-radius:999px;
  opacity:0;
  background:radial-gradient(circle, rgba(255,248,212,0.95) 0%, rgba(255,181,70,0.6) 34%, rgba(255,110,18,0.2) 60%, rgba(255,110,18,0) 100%);
  animation:cinderCorePulse 560ms ease-out forwards;
}
.join-party .cinder-ember-fx::before{
  content:"";
  position:absolute;
  left:var(--origin-x);
  top:var(--origin-y);
  width:calc(var(--start-distance) * 2.1);
  height:calc(var(--start-distance) * 2.1);
  margin-left:calc(var(--start-distance) * -1.05);
  margin-top:calc(var(--start-distance) * -1.05);
  border-radius:18px;
  border:2px solid rgba(255,187,94,0.7);
  box-shadow:
    0 0 0 2px rgba(255,120,35,0.28),
    0 0 18px rgba(255,133,43,0.4);
  opacity:0;
  animation:cinderOutlineFlash 560ms ease-out forwards;
}
.join-party .cinder-ember-fx__ember{
  position:absolute;
  left:var(--origin-x);
  top:var(--origin-y);
  width:var(--size);
  height:var(--size);
  margin-left:calc(var(--size) * -0.5);
  margin-top:calc(var(--size) * -0.5);
  border-radius:999px;
  opacity:0;
  transform:rotate(var(--angle)) translateX(var(--start-distance)) scale(0.72);
  transform-origin:center;
  background:radial-gradient(circle, rgba(255,253,237,0.98) 0%, rgba(255,198,87,0.9) 38%, rgba(255,110,22,0.9) 70%, rgba(255,110,22,0) 100%);
  filter:drop-shadow(0 0 8px rgba(255,144,31,0.75));
  animation:cinderEmberBurst var(--duration) cubic-bezier(.19,.72,.22,1) var(--delay) forwards;
}

@keyframes cinderEmberBurst{
  0%{
    opacity:0;
    transform:rotate(var(--angle)) translateX(calc(var(--start-distance) - 8px)) scale(0.6);
  }
  28%{
    opacity:1;
    transform:rotate(calc(var(--angle) + 30deg)) translateX(calc(var(--start-distance) + 12px)) scale(1);
  }
  100%{
    opacity:0;
    transform:rotate(calc(var(--angle) + 66deg)) translateX(calc(var(--start-distance) + var(--distance))) scale(0.86);
  }
}

@keyframes cinderCorePulse{
  0%{
    opacity:0;
    transform:scale(0.6);
  }
  22%{
    opacity:0.95;
    transform:scale(1.05);
  }
  100%{
    opacity:0;
    transform:scale(1.5);
  }
}

@keyframes cinderOutlineFlash{
  0%{
    opacity:0;
    transform:scale(0.9);
  }
  20%{
    opacity:0.95;
    transform:scale(1.02);
  }
  100%{
    opacity:0;
    transform:scale(1.1);
  }
}
.join-party .paladin-sunburst__beam{
  position:absolute;
  left:var(--origin-x);
  top:var(--origin-y);
  width:2px;
  height:min(74vh, 640px);
  margin-left:-1px;
  margin-top:calc(min(74vh, 640px) * -1);
  transform-origin:50% 100%;
  opacity:0;
  border-radius:999px;
  background:linear-gradient(180deg, rgba(255,255,255,0.98) 0%, rgba(255,239,170,0.86) 40%, rgba(255,215,115,0.36) 72%, rgba(255,215,115,0));
  filter:drop-shadow(0 0 10px rgba(255,230,136,0.8));
  animation:paladinSunbeam 500ms ease-out forwards;
}
.join-party .paladin-sunburst__beam--a{ transform:rotate(-88deg); animation-delay:0ms; }
.join-party .paladin-sunburst__beam--b{ transform:rotate(-58deg); animation-delay:18ms; }
.join-party .paladin-sunburst__beam--c{ transform:rotate(-30deg); animation-delay:8ms; }
.join-party .paladin-sunburst__beam--d{ transform:rotate(0deg); animation-delay:24ms; }
.join-party .paladin-sunburst__beam--e{ transform:rotate(30deg); animation-delay:10ms; }
.join-party .paladin-sunburst__beam--f{ transform:rotate(58deg); animation-delay:20ms; }
.join-party .paladin-sunburst__beam--g{ transform:rotate(88deg); animation-delay:0ms; }
.join-party .paladin-sunburst__beam--h{ transform:rotate(122deg); animation-delay:14ms; }
.join-party .paladin-sunburst__glow{
  position:absolute;
  left:var(--origin-x);
  top:var(--origin-y);
  width:220px;
  height:220px;
  margin-left:-110px;
  margin-top:-110px;
  border-radius:999px;
  opacity:0;
  background:radial-gradient(circle, rgba(255,255,240,0.75) 0%, rgba(255,230,150,0.44) 38%, rgba(255,230,150,0) 72%);
  filter:blur(2px);
  animation:paladinSunGlow 500ms ease-out forwards;
}

@keyframes paladinSunbeam{
  0%{
    opacity:0;
    height:min(16vh, 120px);
  }
  18%{
    opacity:1;
    height:min(76vh, 660px);
  }
  100%{
    opacity:0;
    height:min(84vh, 720px);
  }
}

@keyframes paladinSunGlow{
  0%{
    opacity:0;
    transform:scale(0.7);
  }
  20%{
    opacity:0.95;
    transform:scale(1.05);
  }
  100%{
    opacity:0;
    transform:scale(1.35);
  }
}

/* ================= JOIN PARTY ================= */
.join-portal-bleed{
  min-height:100vh;
  width:100vw;
  margin-left:calc(50% - 50vw);
  background:
    radial-gradient(circle at 18% 10%, rgba(16,185,129,0.22), transparent 40%),
    radial-gradient(circle at 82% 8%, rgba(52,211,153,0.18), transparent 45%),
    linear-gradient(180deg, #0b1b1a 0%, #0d2421 45%, #0f2a27 100%);
  padding:0 0 calc(96px * var(--ui-scale));
  display:flex;
  align-items:center;
  justify-content:center;
}
.join-quizizz-bleed{
  min-height:100vh;
  width:100vw;
  margin-left:calc(50% - 50vw);
  background:
    radial-gradient(circle at 18% 10%, rgba(16,185,129,0.22), transparent 40%),
    radial-gradient(circle at 82% 8%, rgba(52,211,153,0.18), transparent 45%),
    linear-gradient(180deg, #0b1b1a 0%, #0d2421 45%, #0f2a27 100%);
  padding:0 0 calc(120px * var(--ui-scale));
  display:flex;
  align-items:center;
  justify-content:center;
}
.join-quizizz-shell{
  width:100%;
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:calc(18px * var(--ui-scale));
  color:#f8fafc;
}
.join-quizizz-logo{
  font-family:var(--font-display), var(--font-body), sans-serif;
  font-size:clamp(calc(36px * var(--ui-scale)), calc(5vw * var(--ui-scale)), calc(56px * var(--ui-scale)));
  font-weight:900;
  letter-spacing:0.08em;
  text-transform:uppercase;
  color:#f8fafc;
  text-shadow:0 8px 20px rgba(7,15,13,0.5);
}
.join-quizizz-card{
  width:min(420px, 90vw);
  background:rgba(9,18,17,0.72);
  border:1px solid rgba(16,185,129,0.4);
  border-radius:calc(12px * var(--ui-scale));
  padding:calc(28px * var(--ui-scale)) calc(26px * var(--ui-scale));
  box-shadow:0 16px 30px rgba(6,12,11,0.45);
  text-align:center;
}
.join-quizizz-title{
  margin:0 0 calc(12px * var(--ui-scale));
  font-size:calc(16px * var(--ui-scale));
  letter-spacing:0.08em;
  text-transform:uppercase;
  color:#e2e8f0;
  font-weight:800;
}
.join-quizizz-input{
  width:100%;
  border:2px solid rgba(148,163,184,0.35);
  background:rgba(226,232,240,0.18);
  color:#f8fafc;
  padding:calc(12px * var(--ui-scale)) calc(14px * var(--ui-scale));
  font-size:calc(16px * var(--ui-scale));
  font-weight:700;
  text-align:center;
  letter-spacing:0.2em;
  text-transform:uppercase;
  border-radius:calc(6px * var(--ui-scale));
  margin-bottom:calc(12px * var(--ui-scale));
}
.join-quizizz-input::placeholder{
  color:rgba(226,232,240,0.7);
}
.join-quizizz-input--name{
  letter-spacing:0.02em;
  text-transform:none;
}
.join-quizizz-btn{
  width:100%;
  border:none;
  border-radius:calc(6px * var(--ui-scale));
  padding:calc(12px * var(--ui-scale)) calc(16px * var(--ui-scale));
  font-weight:800;
  font-size:calc(16px * var(--ui-scale));
  background:#f8fafc;
  color:#0b1b1a;
  cursor:pointer;
  transition:transform .12s ease, box-shadow .12s ease;
}
.join-quizizz-btn:disabled{
  opacity:0.6;
  cursor:not-allowed;
}
.join-quizizz-btn:not(:disabled):hover{
  transform:translateY(-1px);
  box-shadow:0 10px 18px rgba(10,20,18,0.3);
}
.join-quizizz-divider{
  height:1px;
  background:rgba(148,163,184,0.28);
  margin:calc(16px * var(--ui-scale)) 0;
}
.join-quizizz-avatar-title{
  font-size:calc(13px * var(--ui-scale));
  letter-spacing:0.08em;
  text-transform:uppercase;
  color:#cbd5f5;
  font-weight:700;
  margin-bottom:calc(10px * var(--ui-scale));
}
.join-quizizz-avatars{
  display:grid;
  grid-template-columns:repeat(auto-fit, minmax(110px, 1fr));
  gap:calc(10px * var(--ui-scale));
}
.join-quizizz-avatar{
  background:rgba(10,20,18,0.65);
  border:1px solid rgba(16,185,129,0.25);
  border-radius:calc(8px * var(--ui-scale));
  padding:calc(10px * var(--ui-scale));
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:6px;
  cursor:pointer;
}
.join-quizizz-avatar.is-selected{
  border-color:rgba(52,211,153,0.8);
  box-shadow:0 0 0 2px rgba(16,185,129,0.25);
}
.join-quizizz-avatar .avatar{
  width:72px;
  height:72px;
}
.join-quizizz-avatar .avatar-label{
  color:#e2e8f0;
  font-size:calc(12px * var(--ui-scale));
}
.join-quizizz-paste{
  margin-top:calc(12px * var(--ui-scale));
  background:transparent;
  border:none;
  color:#a7f3d0;
  font-weight:700;
  cursor:pointer;
}
.join-quizizz-paste:hover{
  color:#34d399;
}
.join-quizizz-error{
  margin-top:calc(12px * var(--ui-scale));
  background:rgba(248,113,113,0.12);
  border:1px solid rgba(248,113,113,0.3);
  border-radius:calc(8px * var(--ui-scale));
  padding:calc(10px * var(--ui-scale));
  color:#fee2e2;
  display:flex;
  flex-direction:column;
  gap:6px;
}
.join-quizizz-resume{
  width:min(560px, 90vw);
  margin-top:calc(12px * var(--ui-scale));
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:calc(12px * var(--ui-scale));
  padding:calc(12px * var(--ui-scale)) calc(16px * var(--ui-scale));
  border-radius:calc(10px * var(--ui-scale));
  border:1px solid rgba(16,185,129,0.3);
  background:rgba(10,20,18,0.55);
}
.join-quizizz-resume-title{
  font-weight:700;
  color:#f8fafc;
}
.join-quizizz-resume-sub{
  color:#cbd5f5;
  font-size:calc(12px * var(--ui-scale));
}
.join-quizizz-resume-actions{
  display:flex;
  gap:calc(8px * var(--ui-scale));
  flex-wrap:wrap;
}
.join-quizizz-back{
  color:#cbd5f5;
  font-size:calc(12px * var(--ui-scale));
  text-decoration:none;
}
.join-quizizz-back:hover{
  color:#f8fafc;
}
.join-portal{
  width:100%;
  display:flex;
  justify-content:center;
}
.join-portal-card{
  width:min(1040px, 92vw);
  background:rgba(10, 23, 22, 0.72);
  border:1px solid rgba(16,185,129,0.28);
  border-radius:calc(24px * var(--ui-scale));
  padding:calc(44px * var(--ui-scale));
  color:#f8fafc;
  box-shadow:0 18px 40px rgba(10, 20, 18, 0.45);
}
.join-portal-head{
  display:flex;
  flex-direction:column;
  gap:calc(8px * var(--ui-scale));
  margin-bottom:calc(28px * var(--ui-scale));
}
.join-portal-title{
  margin:0;
  font-size:clamp(calc(28px * var(--ui-scale)), calc(3vw * var(--ui-scale)), calc(38px * var(--ui-scale)));
  font-weight:800;
  letter-spacing:0.01em;
  color:#f8fafc;
}
.join-portal-sub{
  margin:0;
  color:#e2e8f0;
  max-width:560px;
}
.join-portal-resume{
  margin-top:calc(16px * var(--ui-scale));
  padding:calc(14px * var(--ui-scale)) calc(18px * var(--ui-scale));
  border-radius:calc(16px * var(--ui-scale));
  border:1px solid rgba(16,185,129,0.28);
  background:rgba(15,35,33,0.55);
  display:flex;
  flex-wrap:wrap;
  align-items:center;
  justify-content:space-between;
  gap:calc(12px * var(--ui-scale));
}
.join-portal-resume-title{
  font-weight:700;
  color:#f8fafc;
}
.join-portal-resume-sub{
  color:#cbd5f5;
  font-size:calc(13px * var(--ui-scale));
}
.join-portal-resume-actions{
  display:flex;
  gap:calc(10px * var(--ui-scale));
  flex-wrap:wrap;
}
.join-portal-grid{
  display:grid;
  grid-template-columns:repeat(2, minmax(0, 1fr));
  gap:calc(24px * var(--ui-scale));
}
.join-portal-panel{
  background:rgba(15,35,33,0.55);
  border:1px solid rgba(16,185,129,0.2);
  border-radius:calc(18px * var(--ui-scale));
  padding:calc(22px * var(--ui-scale));
  display:flex;
  flex-direction:column;
  gap:calc(14px * var(--ui-scale));
}
.join-portal-panel .card-title{
  color:#f8fafc;
  margin-bottom:0;
}
.join-portal-panel .card-sub{
  color:#cbd5f5;
}
.join-portal-panel .field-label{
  color:#e2e8f0;
}
.join-portal-panel .input{
  background:rgba(9,20,18,0.72);
  border-color:rgba(148,163,184,0.35);
  color:#f8fafc;
}
.join-portal-panel .input::placeholder{
  color:rgba(226,232,240,0.6);
}
.join-portal-panel .join-code-input{
  letter-spacing:0.2em;
}
.join-portal-panel .badge{
  background:rgba(16,185,129,0.18);
  color:#f8fafc;
  border-color:rgba(52,211,153,0.45);
}
.join-portal-panel-head{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
}
.join-portal-actions{
  margin-top:calc(24px * var(--ui-scale));
  display:flex;
  justify-content:center;
  gap:calc(12px * var(--ui-scale));
  flex-wrap:wrap;
}
.join-portal .avatar-grid{
  grid-template-columns:repeat(auto-fit, minmax(140px, 1fr));
  gap:calc(14px * var(--ui-scale));
}
.join-portal .avatar-tile{
  min-height:180px;
  background:rgba(9,20,18,0.65);
  border:1px solid rgba(16,185,129,0.16);
  box-shadow:none;
}
.join-portal .avatar-tile .avatar{
  max-width:140px;
}
.join-portal .avatar-label{
  color:#e2e8f0;
}
.join-portal .avatar-tile.is-selected{
  border-color:rgba(52,211,153,0.75);
  box-shadow:0 0 0 2px rgba(16,185,129,0.25);
}
.join-portal .btn-outline{
  background:transparent;
  color:#e2e8f0;
  border-color:rgba(148,163,184,0.4);
}
.join-portal .btn-outline:hover{
  background:rgba(16,185,129,0.12);
}
.join-portal .join-code-hint{
  color:rgba(226,232,240,0.7);
}
@media (max-width: 900px){
  .join-portal-card{
    padding:calc(32px * var(--ui-scale));
  }
  .join-portal-grid{
    grid-template-columns:1fr;
  }
}
.join-party .join-panel{
  position:relative;
}
.join-party .join-panel--glow::after{
  content:"";
  position:absolute;
  inset:-24px;
  background:radial-gradient(circle at 50% 15%, rgba(120,200,180,0.2), transparent 60%);
  filter:blur(10px);
  z-index:-1;
}
.join-party .join-code-row{
  display:flex;
  gap:12px;
  align-items:center;
  flex-wrap:wrap;
}
.join-party .join-code-input{
  font-size:18px;
  letter-spacing:0.18em;
  text-transform:uppercase;
  font-weight:700;
  flex:1 1 220px;
}
.join-party .join-code-paste{
  white-space:nowrap;
}
.join-party .join-code-hint{
  display:block;
  margin-top:6px;
}

.join-party .water-mage-fx{
  position:fixed;
  inset:0;
  pointer-events:none;
  z-index:60;
  overflow:hidden;
}
.join-party .water-mage-fx__sigil{
  position:absolute;
  left:var(--origin-x);
  top:var(--origin-y);
  width:340px;
  height:340px;
  margin-left:-170px;
  margin-top:-170px;
  opacity:0;
  background:url("/assets/circe-rune.png") center / contain no-repeat;
  filter:hue-rotate(188deg) saturate(1.45) brightness(1.08) drop-shadow(0 0 24px rgba(90,182,255,0.95));
  mix-blend-mode:screen;
  animation:waterSigilCast 650ms ease-out forwards;
}
.join-party .water-mage-fx__sprite{
  position:absolute;
  top:-14%;
  left:var(--left);
  width:var(--size);
  height:calc(var(--size) * 1.55);
  margin-left:calc(var(--size) * -0.5);
  opacity:0;
  background-image:url("/assets/water-drop.png");
  background-size:contain;
  background-position:center;
  background-repeat:no-repeat;
  image-rendering:pixelated;
  filter:drop-shadow(0 1px 1px rgba(3, 62, 99, 0.28));
  animation:mageDropFall var(--duration) linear var(--delay) forwards;
}

@keyframes waterSigilCast{
  0%{
    opacity:0;
    transform:scale(0.62) rotate(-16deg);
  }
  20%{
    opacity:0.9;
    transform:scale(1.04) rotate(-4deg);
  }
  100%{
    opacity:0;
    transform:scale(1.24) rotate(20deg);
  }
}

@keyframes mageDropFall{
  0%{
    opacity:0;
    transform:translate3d(0, -12vh, 0) scale(0.88) rotate(-8deg);
  }
  12%{
    opacity:var(--opacity);
  }
  84%{
    opacity:calc(var(--opacity) * 0.88);
  }
  100%{
    opacity:0;
    transform:translate3d(var(--drift), 122vh, 0) scale(1.06) rotate(10deg);
  }
}

@media (max-width: 640px){
  .page{
    padding:calc(18px * var(--ui-scale)) 0 calc(36px * var(--ui-scale));
  }
  .stack{
    gap:calc(14px * var(--ui-scale));
  }
  .row{
    gap:calc(10px * var(--ui-scale));
  }
  .card-title{
    font-size:clamp(calc(20px * var(--ui-scale)), calc(5.6vw * var(--ui-scale)), calc(24px * var(--ui-scale)));
    line-height:1.2;
  }
  .card-sub{
    font-size:14px;
    line-height:1.5;
  }
  .input,
  .textarea,
  .select,
  .btn{
    min-height:44px;
    font-size:16px;
  }
  .btn-small{
    min-height:40px;
    font-size:14px;
  }
  .page-header .row{
    width:100%;
    align-items:stretch;
  }
  .page-header .row .btn{
    width:100%;
  }
  .party-quiz-layout{
    gap:14px;
  }
  .party-question-card,
  .party-host-card,
  .party-scoreboard-card,
  .lobby-shell{
    box-shadow:4px 4px 0 rgba(42,22,61,0.14);
  }
  .party-meta{
    gap:8px;
  }
  .party-question-text{
    font-size:clamp(calc(20px * var(--ui-scale)), calc(6vw * var(--ui-scale)), calc(24px * var(--ui-scale)));
    line-height:1.35;
  }
  .party-options{
    gap:10px;
    margin-top:12px;
  }
  .party-option{
    padding:14px 14px;
    font-size:16px;
    line-height:1.45;
    gap:12px;
  }
  .party-option-letter{
    width:32px;
    height:32px;
  }
  .score-row{
    padding:10px;
  }
  .lobby-header{
    align-items:flex-start;
  }
  .lobby-actions{
    width:100%;
  }
  .lobby-actions .btn{
    width:100%;
  }
  .lobby-panel.lobby-invite{
    padding:18px;
  }
  .lobby-panel-head{
    margin-bottom:12px;
  }
  .lobby-timer{
    min-width:0;
    width:100%;
  }
  .lobby-timer .select{
    width:100%;
  }
  .lobby-link{
    align-items:stretch;
  }
  .lobby-link .input{
    flex:1 1 100%;
  }
  .lobby-link .btn{
    width:100%;
  }
  .party-code-banner{
    width:100%;
    justify-content:space-between;
  }
  .party-code-value{
    font-size:16px;
    letter-spacing:0.12em;
  }
  .avatar-grid{
    grid-template-columns:repeat(2, minmax(0, 1fr));
    gap:12px;
  }
  .avatar-tile{
    padding:12px 10px;
    min-height:176px;
  }
  .avatar-tile .avatar{
    max-width:180px;
  }
  .avatar-label{
    font-size:13px;
  }
  .join-party .join-code-row{
    align-items:stretch;
  }
  .join-party .join-code-paste{
    width:100%;
  }
  .join-party .water-mage-fx__sprite{
    image-rendering:auto;
  }
}
@media (max-width: 420px){
  .page{
    padding:14px 0 30px;
  }
  .card{
    padding:14px;
  }
  .badge{
    font-size:10px;
    padding:4px 8px;
  }
  .party-option{
    padding:12px;
    font-size:15px;
  }
  .party-code-value{
    font-size:14px;
  }
  .avatar-grid{
    gap:10px;
  }
  .avatar-tile{
    padding:10px 8px;
    min-height:160px;
  }
}
@media (hover: none){
  .avatar-tile:not(:disabled):hover{
    transform:none;
    box-shadow:none;
  }
  .dashboard .avatar-tile:not(:disabled):hover,
  .join-party .avatar-tile:not(:disabled):hover{
    border-color:transparent;
    box-shadow:none;
  }
  .dashboard .avatar-tile:not(:disabled):hover .avatar,
  .join-party .avatar-tile:not(:disabled):hover .avatar{
    filter:none;
  }
}
@media (prefers-reduced-motion: reduce){
  .join-party .water-mage-fx,
  .join-party .paladin-sunburst,
  .join-party .cinder-ember-fx,
  .join-party .knight-shield-fx,
  .join-party .spartan-dory-fx,
  .join-party .circe-assassin-fx{
    display:none;
  }
}

/* ================= COSMETICS ================= */
.cosmetic-grid{
  display:flex;
  flex-wrap:wrap;
  gap:10px;
}
.cosmetic-tile{
  display:flex;
  align-items:center;
  gap:10px;
  padding:10px 14px;
  border-radius:14px;
  border:1px solid var(--border);
  background:#fff;
  font:inherit;
  cursor:pointer;
  transition:transform .12s ease, box-shadow .12s ease, border-color .12s ease;
}
.cosmetic-tile.is-selected{
  border-color:rgba(15,118,110,0.6);
  box-shadow:0 12px 22px rgba(15,118,110,0.18);
}
.cosmetic-tile:hover{
  transform:translateY(-1px);
  box-shadow:0 12px 24px rgba(15,23,42,0.12);
}
.cosmetic-tile.is-locked{
  cursor:not-allowed;
  opacity:0.55;
  box-shadow:none;
  transform:none;
}

/* ================= COSMETIC THEMES ================= */
:root[data-cosmetic="neon-outline"]{
  --cosmetic-accent:rgba(56,189,248,0.65);
  --cosmetic-glow:rgba(56,189,248,0.25);
  --cosmetic-btn-bg:#0EA5E9;
  --cosmetic-btn-bg-hover:#0284C7;
}
:root[data-cosmetic="gilded-frame"]{
  --cosmetic-accent:rgba(251,191,36,0.7);
  --cosmetic-glow:rgba(251,191,36,0.28);
  --cosmetic-btn-bg:#F59E0B;
  --cosmetic-btn-bg-hover:#D97706;
}
:root[data-cosmetic="emerald-spark"]{
  --cosmetic-accent:rgba(52,211,153,0.65);
  --cosmetic-glow:rgba(52,211,153,0.24);
  --cosmetic-btn-bg:#10B981;
  --cosmetic-btn-bg-hover:#059669;
}
:root[data-cosmetic="starburst-trim"]{
  --cosmetic-accent:rgba(244,114,182,0.6);
  --cosmetic-glow:rgba(244,114,182,0.24);
  --cosmetic-btn-bg:#EC4899;
  --cosmetic-btn-bg-hover:#DB2777;
}
:root[data-cosmetic="velvet-edge"]{
  --cosmetic-accent:rgba(148,81,81,0.6);
  --cosmetic-glow:rgba(148,81,81,0.24);
  --cosmetic-btn-bg:#991B1B;
  --cosmetic-btn-bg-hover:#7F1D1D;
}
:root[data-cosmetic="sapphire-pulse"]{
  --cosmetic-accent:rgba(59,130,246,0.7);
  --cosmetic-glow:rgba(59,130,246,0.26);
  --cosmetic-btn-bg:#2563EB;
  --cosmetic-btn-bg-hover:#1D4ED8;
}
:root[data-cosmetic="crimson-halo"]{
  --cosmetic-accent:rgba(220,38,38,0.7);
  --cosmetic-glow:rgba(220,38,38,0.24);
  --cosmetic-btn-bg:#DC2626;
  --cosmetic-btn-bg-hover:#B91C1C;
}
:root[data-cosmetic="amber-drift"]{
  --cosmetic-accent:rgba(245,158,11,0.7);
  --cosmetic-glow:rgba(245,158,11,0.26);
  --cosmetic-btn-bg:#F59E0B;
  --cosmetic-btn-bg-hover:#D97706;
}
:root[data-cosmetic="arctic-gleam"]{
  --cosmetic-accent:rgba(56,189,248,0.7);
  --cosmetic-glow:rgba(125,211,252,0.24);
  --cosmetic-btn-bg:#38BDF8;
  --cosmetic-btn-bg-hover:#0EA5E9;
}
:root[data-cosmetic="violet-prism"]{
  --cosmetic-accent:rgba(139,92,246,0.7);
  --cosmetic-glow:rgba(139,92,246,0.24);
  --cosmetic-btn-bg:#8B5CF6;
  --cosmetic-btn-bg-hover:#7C3AED;
}

:root[data-cosmetic="neon-outline"] .card,
:root[data-cosmetic="neon-outline"] .card.card--plain,
:root[data-cosmetic="gilded-frame"] .card,
:root[data-cosmetic="gilded-frame"] .card.card--plain,
:root[data-cosmetic="emerald-spark"] .card,
:root[data-cosmetic="emerald-spark"] .card.card--plain,
:root[data-cosmetic="starburst-trim"] .card,
:root[data-cosmetic="starburst-trim"] .card.card--plain,
:root[data-cosmetic="velvet-edge"] .card,
:root[data-cosmetic="velvet-edge"] .card.card--plain,
:root[data-cosmetic="sapphire-pulse"] .card,
:root[data-cosmetic="sapphire-pulse"] .card.card--plain,
:root[data-cosmetic="crimson-halo"] .card,
:root[data-cosmetic="crimson-halo"] .card.card--plain,
:root[data-cosmetic="amber-drift"] .card,
:root[data-cosmetic="amber-drift"] .card.card--plain,
:root[data-cosmetic="arctic-gleam"] .card,
:root[data-cosmetic="arctic-gleam"] .card.card--plain,
:root[data-cosmetic="violet-prism"] .card,
:root[data-cosmetic="violet-prism"] .card.card--plain{
  border-color:var(--cosmetic-accent);
  box-shadow:0 18px 34px var(--cosmetic-glow);
}

:root[data-cosmetic="neon-outline"] .page-title,
:root[data-cosmetic="neon-outline"] .card-title,
:root[data-cosmetic="gilded-frame"] .page-title,
:root[data-cosmetic="gilded-frame"] .card-title,
:root[data-cosmetic="emerald-spark"] .page-title,
:root[data-cosmetic="emerald-spark"] .card-title,
:root[data-cosmetic="starburst-trim"] .page-title,
:root[data-cosmetic="starburst-trim"] .card-title,
:root[data-cosmetic="velvet-edge"] .page-title,
:root[data-cosmetic="velvet-edge"] .card-title,
:root[data-cosmetic="sapphire-pulse"] .page-title,
:root[data-cosmetic="sapphire-pulse"] .card-title,
:root[data-cosmetic="crimson-halo"] .page-title,
:root[data-cosmetic="crimson-halo"] .card-title,
:root[data-cosmetic="amber-drift"] .page-title,
:root[data-cosmetic="amber-drift"] .card-title,
:root[data-cosmetic="arctic-gleam"] .page-title,
:root[data-cosmetic="arctic-gleam"] .card-title,
:root[data-cosmetic="violet-prism"] .page-title,
:root[data-cosmetic="violet-prism"] .card-title{
  text-shadow:0 6px 18px var(--cosmetic-glow);
}

:root[data-cosmetic="neon-outline"] .reward-kicker,
:root[data-cosmetic="gilded-frame"] .reward-kicker,
:root[data-cosmetic="emerald-spark"] .reward-kicker,
:root[data-cosmetic="starburst-trim"] .reward-kicker,
:root[data-cosmetic="velvet-edge"] .reward-kicker,
:root[data-cosmetic="sapphire-pulse"] .reward-kicker,
:root[data-cosmetic="crimson-halo"] .reward-kicker,
:root[data-cosmetic="amber-drift"] .reward-kicker,
:root[data-cosmetic="arctic-gleam"] .reward-kicker,
:root[data-cosmetic="violet-prism"] .reward-kicker{
  color:var(--cosmetic-accent);
}

:root[data-cosmetic="neon-outline"] .btn-primary,
:root[data-cosmetic="gilded-frame"] .btn-primary,
:root[data-cosmetic="emerald-spark"] .btn-primary,
:root[data-cosmetic="starburst-trim"] .btn-primary,
:root[data-cosmetic="velvet-edge"] .btn-primary,
:root[data-cosmetic="sapphire-pulse"] .btn-primary,
:root[data-cosmetic="crimson-halo"] .btn-primary,
:root[data-cosmetic="amber-drift"] .btn-primary,
:root[data-cosmetic="arctic-gleam"] .btn-primary,
:root[data-cosmetic="violet-prism"] .btn-primary{
  background:var(--cosmetic-btn-bg);
  border-color:var(--cosmetic-btn-bg);
  color:#fff;
  box-shadow:0 0 18px var(--cosmetic-glow);
}
:root[data-cosmetic="neon-outline"] .btn-primary:hover,
:root[data-cosmetic="gilded-frame"] .btn-primary:hover,
:root[data-cosmetic="emerald-spark"] .btn-primary:hover,
:root[data-cosmetic="starburst-trim"] .btn-primary:hover,
:root[data-cosmetic="velvet-edge"] .btn-primary:hover,
:root[data-cosmetic="sapphire-pulse"] .btn-primary:hover,
:root[data-cosmetic="crimson-halo"] .btn-primary:hover,
:root[data-cosmetic="amber-drift"] .btn-primary:hover,
:root[data-cosmetic="arctic-gleam"] .btn-primary:hover,
:root[data-cosmetic="violet-prism"] .btn-primary:hover{
  background:var(--cosmetic-btn-bg-hover);
  border-color:var(--cosmetic-btn-bg-hover);
}

:root[data-cosmetic="neon-outline"] .badge,
:root[data-cosmetic="gilded-frame"] .badge,
:root[data-cosmetic="emerald-spark"] .badge,
:root[data-cosmetic="starburst-trim"] .badge,
:root[data-cosmetic="velvet-edge"] .badge,
:root[data-cosmetic="sapphire-pulse"] .badge,
:root[data-cosmetic="crimson-halo"] .badge,
:root[data-cosmetic="amber-drift"] .badge,
:root[data-cosmetic="arctic-gleam"] .badge,
:root[data-cosmetic="violet-prism"] .badge{
  border-color:var(--cosmetic-accent);
}

:root[data-cosmetic="neon-outline"] .card,
:root[data-cosmetic="neon-outline"] .card.card--plain{
  box-shadow:0 16px 30px rgba(56,189,248,0.2);
}

:root[data-cosmetic="gilded-frame"] .card,
:root[data-cosmetic="gilded-frame"] .card.card--plain{
  box-shadow:0 18px 32px rgba(251,191,36,0.22);
}
:root[data-cosmetic="gilded-frame"] .badge{
  background:rgba(251,191,36,0.2);
  border-color:rgba(251,191,36,0.4);
}

:root[data-cosmetic="emerald-spark"] .card,
:root[data-cosmetic="emerald-spark"] .card.card--plain{
  box-shadow:0 18px 30px rgba(52,211,153,0.2);
}
:root[data-cosmetic="emerald-spark"] .progress > span,
:root[data-cosmetic="emerald-spark"] .progress-bar > span{
  background:linear-gradient(90deg, #34D399, #16A34A);
}

:root[data-cosmetic="starburst-trim"] .card,
:root[data-cosmetic="starburst-trim"] .card.card--plain{
  box-shadow:
    0 0 0 1px rgba(244,114,182,0.25) inset,
    0 18px 34px rgba(244,114,182,0.18);
}
:root[data-cosmetic="starburst-trim"] .reward-chip{
  background:linear-gradient(120deg, rgba(244,114,182,0.7), rgba(251,191,36,0.7));
}

:root[data-cosmetic="velvet-edge"] .card,
:root[data-cosmetic="velvet-edge"] .card.card--plain{
  box-shadow:0 18px 32px rgba(148,81,81,0.2);
}

/* ================= REWARDS ================= */
.vegas-panel{
  background:
    linear-gradient(180deg, rgba(255,255,255,0.98), rgba(236,253,245,0.9)) padding-box,
    linear-gradient(120deg, rgba(251,191,36,0.7), rgba(52,211,153,0.35), rgba(56,189,248,0.45)) border-box;
  border:1px solid transparent;
  position:relative;
  isolation:isolate;
  overflow:hidden;
  box-shadow:0 20px 36px rgba(15,23,42,0.14), 0 0 26px rgba(52,211,153,0.18);
}
.vegas-panel::after{
  content:"";
  position:absolute;
  top:-60%;
  left:-20%;
  width:60%;
  height:220%;
  background:linear-gradient(120deg, rgba(255,255,255,0), rgba(255,255,255,0.7), rgba(255,255,255,0));
  opacity:0.35;
  transform:translateX(-120%);
  animation:vegasShimmer 7s ease-in-out infinite;
  pointer-events:none;
  z-index:0;
}
.vegas-panel > *{
  position:relative;
  z-index:1;
}
.reward-panel{
  position:relative;
  border-radius:22px;
}
.reward-header{
  display:flex;
  justify-content:space-between;
  align-items:flex-start;
  gap:12px;
}
.reward-kicker{
  font-size:12px;
  text-transform:uppercase;
  letter-spacing:0.14em;
  color:rgba(15,118,110,0.8);
  font-weight:700;
}
.reward-mode{
  font-weight:700;
  color:var(--ink);
}
.reward-chip{
  padding:6px 14px;
  border-radius:999px;
  background:linear-gradient(120deg, rgba(251,191,36,0.9), rgba(52,211,153,0.7));
  color:#0B1120;
  font-weight:800;
  box-shadow:0 8px 16px rgba(251,191,36,0.24);
}
.reward-chip.is-muted{
  background:rgba(226,232,240,0.9);
  color:var(--text-muted);
  box-shadow:none;
}
.reward-chip{
  text-align:center;
}
.meta-panel .reward-chip{
  white-space:nowrap;
}
.meta-panel .card-title{
  margin-top:4px;
}
.meta-panel .progress-bar{
  margin:16px 0 10px;
}
.reward-chip--small{
  padding:4px 10px;
  font-size:12px;
}
.reward-detail{
  margin:8px 0 16px;
  font-size:15px;
  color:var(--ink-soft);
}
.reward-grid{
  display:grid;
  grid-template-columns:repeat(auto-fit, minmax(140px, 1fr));
  gap:12px;
}
.reward-metric{
  background:rgba(255,255,255,0.72);
  border-radius:14px;
  padding:12px;
  border:1px solid rgba(15,118,110,0.12);
  display:flex;
  flex-direction:column;
  gap:4px;
  font-weight:600;
}
.reward-metric strong{
  font-size:18px;
  color:var(--ink);
}

/* ================= CONFETTI ================= */
.confetti-burst{
  position:absolute;
  inset:0;
  pointer-events:none;
  overflow:hidden;
  z-index:2;
}
.confetti-piece{
  position:absolute;
  top:6px;
  left:var(--x);
  width:12px;
  height:16px;
  border-radius:6px;
  background:linear-gradient(180deg, #E2E8F0, #CBD5F5);
  opacity:0;
  transform:translate(0, -30px) rotate(0deg) scale(var(--size));
  animation:confettiBurst var(--duration) ease-out both;
  animation-delay:var(--delay);
  filter:drop-shadow(0 6px 10px rgba(15,23,42,0.18));
}

.confetti-burst[data-badge="lucky-seven"] .confetti-piece{
  width:14px;
  height:14px;
  border-radius:0;
  clip-path:polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%);
  background:linear-gradient(140deg, #34D399, #F59E0B);
  animation-name:confettiStar;
}
.confetti-burst[data-badge="lucky-seven"] .confetti-piece:nth-child(2n){
  background:linear-gradient(140deg, #0EA5E9, #22C55E);
}
.confetti-burst[data-badge="lucky-seven"] .confetti-piece:nth-child(3n){
  background:linear-gradient(140deg, #F59E0B, #F97316);
}

.confetti-burst[data-badge="default"] .confetti-piece{
  background:linear-gradient(140deg, #38BDF8, #22C55E);
}
.confetti-burst[data-badge="default"] .confetti-piece:nth-child(2n){
  background:linear-gradient(140deg, #F59E0B, #F97316);
}
.confetti-burst[data-badge="default"] .confetti-piece:nth-child(3n){
  background:linear-gradient(140deg, #A855F7, #EC4899);
}

.confetti-burst[data-badge="golden-run"] .confetti-piece{
  width:10px;
  height:28px;
  border-radius:6px;
  clip-path:polygon(0 0, 100% 8%, 86% 100%, 14% 92%);
  background:linear-gradient(180deg, #FDE68A, #F59E0B);
  animation-name:confettiRibbon;
}
.confetti-burst[data-badge="golden-run"] .confetti-piece:nth-child(3n){
  background:linear-gradient(180deg, #FCD34D, #D97706);
}

.confetti-burst[data-badge="high-roller"] .confetti-piece{
  width:16px;
  height:16px;
  border-radius:999px;
  background:radial-gradient(circle at 50% 50%, #FEF3C7 0 3px, #EF4444 3px 7px, #7F1D1D 7px 9px);
  border:2px solid rgba(251,191,36,0.9);
  animation-name:confettiChip;
}
.confetti-burst[data-badge="high-roller"] .confetti-piece:nth-child(2n){
  background:radial-gradient(circle at 50% 50%, #FFEDD5 0 3px, #F97316 3px 7px, #9A3412 7px 9px);
  border-color:rgba(248,113,113,0.85);
}

.confetti-burst[data-badge="midnight-ace"] .confetti-piece{
  width:12px;
  height:18px;
  border-radius:0;
  clip-path:polygon(50% 0%, 100% 50%, 50% 100%, 0% 50%);
  background:linear-gradient(135deg, #1E293B, #7C3AED);
  box-shadow:0 8px 16px rgba(15,23,42,0.45);
  animation-name:confettiShard;
}
.confetti-burst[data-badge="midnight-ace"] .confetti-piece:nth-child(3n){
  background:linear-gradient(135deg, #1E3A8A, #0F172A);
}

@keyframes confettiBurst{
  0%{
    opacity:0;
    transform:translate(0, -30px) rotate(0deg) scale(var(--size));
  }
  20%{
    opacity:1;
  }
  100%{
    opacity:0;
    transform:translate(var(--drift), 240px) rotate(var(--rot)) scale(calc(var(--size) * 1.1));
  }
}
@keyframes confettiStar{
  0%{
    opacity:0;
    transform:translate(0, -28px) rotate(0deg) scale(var(--size));
  }
  25%{
    opacity:1;
  }
  70%{
    transform:translate(calc(var(--drift) * 0.6), 150px) rotate(calc(var(--rot) + 180deg))
      scale(calc(var(--size) * 1.2));
  }
  100%{
    opacity:0;
    transform:translate(var(--drift), 250px) rotate(calc(var(--rot) + 320deg))
      scale(calc(var(--size) * 1.1));
  }
}
@keyframes confettiRibbon{
  0%{
    opacity:0;
    transform:translate(0, -24px) rotate(10deg) scale(var(--size));
  }
  25%{
    opacity:1;
  }
  100%{
    opacity:0;
    transform:translate(calc(var(--drift) * 0.8), 260px) rotate(calc(var(--rot) + 120deg))
      scale(calc(var(--size) * 1.15));
  }
}
@keyframes confettiChip{
  0%{
    opacity:0;
    transform:translate(0, -26px) rotate(0deg) scale(var(--size));
  }
  30%{
    opacity:1;
  }
  70%{
    transform:translate(calc(var(--drift) * 0.9), 190px) rotate(calc(var(--rot) + 540deg))
      scale(calc(var(--size) * 1.05));
  }
  85%{
    transform:translate(calc(var(--drift) * 0.85), 170px) rotate(calc(var(--rot) + 620deg))
      scale(calc(var(--size) * 1.05));
  }
  100%{
    opacity:0;
    transform:translate(var(--drift), 260px) rotate(calc(var(--rot) + 720deg))
      scale(calc(var(--size) * 1.1));
  }
}
@keyframes confettiShard{
  0%{
    opacity:0;
    transform:translate(0, -30px) rotate(0deg) scale(var(--size));
  }
  20%{
    opacity:1;
  }
  100%{
    opacity:0;
    transform:translate(calc(var(--drift) * 1.1), 270px) rotate(calc(var(--rot) + 260deg))
      scale(calc(var(--size) * 1.2));
  }
}
.reward-levelup{
  margin-top:14px;
  padding:10px 14px;
  border-radius:14px;
  background:rgba(251,191,36,0.16);
  color:#92400E;
  font-weight:700;
  box-shadow:0 0 0 1px rgba(251,191,36,0.22) inset;
  animation:neonPulse 2.8s ease-in-out infinite;
}
.reward-nearmiss{
  margin-top:12px;
  display:flex;
  flex-wrap:wrap;
  gap:8px;
  font-weight:600;
  color:#7C2D12;
}
.reward-nearmiss span{
  background:rgba(251,113,133,0.16);
  border-radius:999px;
  padding:6px 12px;
}
.progress-panel .card-title{
  margin:6px 0 0;
}
.progress-bar{
  height:12px;
  border-radius:999px;
  background:rgba(15,23,42,0.08);
  overflow:hidden;
  margin:16px 0 8px;
}
.progress-bar > span{
  display:block;
  height:100%;
  border-radius:inherit;
  background:linear-gradient(90deg, var(--neon-green), var(--neon-blue));
  box-shadow:0 0 12px rgba(52,211,153,0.6);
}
.streak-card{
  margin-top:14px;
  padding:12px 14px;
  border-radius:16px;
  background:rgba(14,116,144,0.12);
  border:1px solid rgba(14,116,144,0.18);
  display:flex;
  flex-direction:column;
  gap:6px;
}
.streak-label{
  text-transform:uppercase;
  letter-spacing:0.12em;
  font-size:11px;
  color:rgba(14,116,144,0.8);
  font-weight:700;
}
.quest-panel .card-title{
  margin-top:6px;
}
.quest-item{
  padding:10px 12px;
  border-radius:14px;
  background:rgba(255,255,255,0.7);
  border:1px solid rgba(15,118,110,0.12);
}
.quest-bar{
  height:8px;
  border-radius:999px;
  background:rgba(15,23,42,0.08);
  margin-top:8px;
  overflow:hidden;
}
.quest-bar span{
  display:block;
  height:100%;
  border-radius:inherit;
  background:linear-gradient(90deg, var(--gold-strong), var(--neon-pink));
}
.loot-panel .card-title{
  margin:6px 0 10px;
}
.loot-chip{
  padding:6px 12px;
  border-radius:999px;
  font-size:12px;
  font-weight:700;
  background:rgba(15,118,110,0.12);
  color:#0F172A;
  border:1px solid transparent;
}
.loot-chip--badge{
  background:rgba(251,191,36,0.18);
  color:#92400E;
}
.loot-chip.is-locked{
  background:rgba(148,163,184,0.25);
  color:#475569;
}
.loot-chip.is-selected{
  border-color:rgba(15,118,110,0.6);
  box-shadow:0 10px 20px rgba(15,118,110,0.2);
}
.answer-locked{
  background:rgba(244,114,182,0.16);
  color:#9D174D;
  border-color:rgba(244,114,182,0.4);
  animation:lockGlow 2.6s ease-in-out infinite;
}
.answer-locked-text{
  font-weight:600;
  color:#9D174D;
}
.scoreboard.results .score-row--tier{
  animation:tierReveal .6s ease both;
  border-color:rgba(251,191,36,0.6);
  box-shadow:0 0 0 1px rgba(251,191,36,0.16) inset, 0 12px 22px rgba(251,191,36,0.18);
}
.scoreboard.results .score-row--tier:nth-child(1){ animation-delay:0ms; }
.scoreboard.results .score-row--tier:nth-child(2){ animation-delay:120ms; }
.scoreboard.results .score-row--tier:nth-child(3){ animation-delay:220ms; }
.result-podium-row{
  padding:6px 0;
  border-bottom:1px dashed rgba(15,118,110,0.18);
}
.result-podium-row.is-first{
  color:#92400E;
  font-weight:800;
}
.swing-badge{
  background:rgba(248,113,113,0.2);
  color:#991B1B;
}

/* ================= FLASHCARDS ================= */
.flashcard-shell{
  max-width:760px;
  margin:0 auto;
  width:100%;
}
.flashcard-meta{
  display:flex;
  justify-content:center;
  margin-bottom:10px;
}
.flashcard-meta--solo{
  justify-content:space-between;
  align-items:center;
  margin-bottom:12px;
  gap:12px;
}
.flashcard-title{
  font-weight:700;
  color:var(--ink);
}
.flashcard-meta--party{
  justify-content:space-between;
  align-items:center;
  gap:12px;
}
.flashcard-progress{
  font-size:12px;
  color:var(--text-muted);
  letter-spacing:0.06em;
  text-transform:uppercase;
}
.flashcard-card{
  border:1px solid var(--border);
  border-radius:18px;
  padding:36px;
  min-height:240px;
  display:flex;
  flex-direction:column;
  justify-content:center;
  gap:12px;
  text-align:center;
}
.flashcard-card--interactive{
  cursor:pointer;
  transition:transform .15s ease, box-shadow .15s ease;
}
.flashcard-card--interactive:hover{
  transform:translateY(-2px);
  box-shadow:0 12px 24px rgba(15,23,42,0.12);
}
.flashcard-label{
  font-size:12px;
  color:var(--text-muted);
  letter-spacing:0.1em;
  text-transform:uppercase;
}
.flashcard-text{
  font-size:clamp(calc(20px * var(--ui-scale)), calc(2.4vw * var(--ui-scale)), calc(30px * var(--ui-scale)));
  color:var(--ink);
  font-weight:600;
}
.flashcard-hint{
  margin:10px 0 0;
  text-align:center;
  color:var(--text-muted);
  font-size:13px;
}
.flashcard-controls{
  display:flex;
  justify-content:center;
  gap:12px;
  margin-top:12px;
  flex-wrap:wrap;
}

/* ================= QUIZ ================= */
.quiz-shell{
  max-width:860px;
  margin:0 auto;
  display:flex;
  flex-direction:column;
  gap:16px;
}
.quiz-meta{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
}
.quiz-progress{
  font-size:12px;
  color:var(--text-muted);
  letter-spacing:0.08em;
  text-transform:uppercase;
}
.quiz-card{
  border:1px solid var(--border);
  border-radius:18px;
  padding:26px;
  background:#f7faf8;
  display:flex;
  flex-direction:column;
  gap:10px;
}
.quiz-label{
  font-size:12px;
  color:var(--text-muted);
  letter-spacing:0.1em;
  text-transform:uppercase;
}
.quiz-text{
  font-size:clamp(calc(18px * var(--ui-scale)), calc(2.2vw * var(--ui-scale)), calc(26px * var(--ui-scale)));
  line-height:1.5;
  color:var(--ink);
  font-weight:600;
}
.quiz-options{
  display:grid;
  grid-template-columns:repeat(2, minmax(0, 1fr));
  gap:12px;
}
.quiz-option{
  border:1px solid var(--border);
  border-radius:14px;
  padding:16px;
  background:#fff;
  text-align:left;
  cursor:pointer;
  font:inherit;
  transition:transform .12s ease, box-shadow .12s ease, border-color .12s ease;
}
.quiz-option:hover{
  transform:translateY(-1px);
  box-shadow:0 10px 20px rgba(15,23,42,0.08);
}
.quiz-choice{
  display:flex;
  gap:10px;
  align-items:flex-start;
}
.quiz-letter{
  font-weight:700;
  color:var(--text-muted);
}
.quiz-result{
  border:1px solid var(--border);
  border-radius:14px;
  padding:18px;
  background:#fff;
}
@media (max-width: 900px){
  .quiz-options{ grid-template-columns:1fr; }
}
@media (max-width: 640px){
  .quiz-card{ padding:18px; }
  .quiz-text{ font-size:18px; }
  .quiz-option{ padding:12px; font-size:15px; }
  .flashcard-card{
    padding:22px;
    min-height:200px;
  }
  .flashcard-meta--solo{
    flex-direction:column;
    align-items:flex-start;
  }
  .flashcard-controls{
    flex-direction:column;
    align-items:stretch;
  }
  .flashcard-controls .btn{
    width:100%;
    justify-content:center;
  }
  .quiz-meta{
    flex-direction:column;
    align-items:flex-start;
  }
}

@keyframes bob {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-4px); }
}

@keyframes hostPulse {
  0%, 100% { box-shadow: 0 0 0 0 rgba(22,163,74,0.35); }
  50% { box-shadow: 0 0 0 6px rgba(22,163,74,0.08); }
}

@keyframes scoreReveal {
  from { opacity: 0; transform: translateY(6px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes revealUp {
  from { opacity: 0; transform: translateY(10px) scale(0.98); }
  to { opacity: 1; transform: translateY(0) scale(1); }
}

@keyframes vegasShimmer {
  0% { transform:translateX(-120%) rotate(12deg); }
  50% { transform:translateX(120%) rotate(12deg); }
  100% { transform:translateX(120%) rotate(12deg); }
}

@keyframes neonPulse {
  0%, 100% { box-shadow:0 0 0 0 rgba(251,191,36,0.2); }
  50% { box-shadow:0 0 0 6px rgba(251,191,36,0.08); }
}

@keyframes tierReveal {
  0% { opacity:0; transform:translateY(10px) scale(0.97); }
  60% { opacity:1; transform:translateY(-2px) scale(1.02); }
  100% { opacity:1; transform:translateY(0) scale(1); }
}

@keyframes lockGlow {
  0%, 100% { box-shadow:0 0 0 rgba(244,114,182,0.0); }
  50% { box-shadow:0 0 12px rgba(244,114,182,0.35); }
}

.avatar-float{
  animation:bob 2.6s ease-in-out infinite;
}

.rpg-reveal{
  animation:revealUp .5s ease both;
}
.rpg-reveal-1{ animation-delay:80ms; }
.rpg-reveal-2{ animation-delay:160ms; }
.rpg-reveal-3{ animation-delay:240ms; }

@media (prefers-reduced-motion: reduce){
  .avatar-float,
  .rpg-reveal,
  .scoreboard.results .score-row,
  .scoreboard.results .score-row--tier,
  .reward-levelup,
  .answer-locked{
    animation:none;
  }
  .vegas-panel::after{
    animation:none;
  }
}

/* ================= NAV ================= */
.nav{
  position:sticky;
  top:0;
  background:rgba(255,255,255,0.9);
  border-bottom:1px solid var(--border);
  z-index:50;
  backdrop-filter:blur(10px);
  box-shadow:0 6px 16px rgba(15,23,42,0.06);
  margin-bottom:0;
  overflow:visible;
}
.nav-inner{
  display:flex;
  align-items:center;
  gap:20px;
  height:160px;
  position:relative;
  overflow:visible;
}
.nav-divider{
  position:absolute;
  left:0;
  right:0;
  bottom:0;
  height:0;
  pointer-events:none;
  overflow:visible;
  z-index:60;
}
.nav-logo{ display:inline-flex; align-items:center; }
.nav-logo img{ height:140px; width:auto; display:block; }
.nav-toggle{
  position:absolute;
  opacity:0;
  pointer-events:none;
  width:1px;
  height:1px;
}
.nav-toggle-btn{
  display:none;
  align-items:center;
  justify-content:center;
  width:42px;
  height:42px;
  padding:0;
  border-radius:12px;
  border:1px solid var(--border);
  background:rgba(255,255,255,0.92);
  color:var(--green);
  cursor:pointer;
  box-shadow:0 6px 14px rgba(15,23,42,0.08);
}
.nav-toggle-btn--close{ display:none; color:var(--ink); }
.nav-toggle-icon{ display:inline-flex; width:20px; height:20px; }
.nav-toggle-icon svg{ width:100%; height:100%; display:block; }
.nav-wordmark{
  font-weight:900;
  font-size:24px;
  color:var(--ink);
  letter-spacing:0.04em;
  font-family:var(--font-display), var(--font-body), sans-serif;
  line-height:1;
  display:inline-block;
}
.nav-links{
  margin-left:auto;
  display:flex;
  align-items:center;
  gap:24px;
}
.nav-list{
  display:grid;
  grid-auto-flow:column;
  gap:24px;
  align-items:center;
}
.nav-auth{
  display:flex;
  align-items:center;
  gap:10px;
}
.nav-drawer-head{ display:none; }
.nav-drawer-title{
  font-size:11px;
  letter-spacing:0.18em;
  text-transform:uppercase;
  color:var(--text-muted);
  font-weight:700;
}
.nav-link{ color:var(--ink-soft); font-weight:600; letter-spacing:0.02em; }
.nav-link:hover{ color:var(--ink); }
.nav-link[aria-current="page"]{ color:var(--green); }
.nav-scrim{
  display:none;
}
.footer{ border-top:1px solid var(--border); padding:28px 0; color:var(--text-muted); font-size:14px; }
@media (max-width: 900px){
  .nav{
    padding-top:env(safe-area-inset-top);
  }
  .nav-inner{
    height:auto;
    min-height:64px;
    padding:8px 0;
    flex-wrap:nowrap;
  }
  .nav-logo img{ height:64px; }
  .nav-toggle-btn--open{
    display:inline-flex;
    margin-left:auto;
    position:relative;
    z-index:120;
  }
  .nav-toggle:checked ~ .nav-toggle-btn--open{
    opacity:0;
    pointer-events:none;
  }
  .nav-links{
    position:fixed;
    top:0;
    right:0;
    height:100dvh;
    width:min(320px, 80vw);
    margin:0;
    padding:calc(16px + env(safe-area-inset-top)) 16px calc(20px + env(safe-area-inset-bottom));
    display:flex;
    flex-direction:column;
    gap:12px;
    align-items:stretch;
    background:#fff;
    border-left:1px solid var(--border);
    box-shadow:-18px 0 32px rgba(15,23,42,0.18);
    transform:translateX(110%);
    opacity:0;
    pointer-events:none;
    transition:transform .2s ease, opacity .2s ease;
    overflow-y:auto;
    z-index:110;
  }
  .nav-toggle:checked ~ .nav-links .nav-toggle-btn--close{
    display:inline-flex;
  }
  .nav-toggle:checked ~ .nav-links{ transform:translateX(0); opacity:1; pointer-events:auto; }
  .nav-scrim{
    display:block;
    position:fixed;
    inset:0;
    background:rgba(15,23,42,0.45);
    opacity:0;
    pointer-events:none;
    transition:opacity .2s ease;
    z-index:100;
  }
  .nav-toggle:checked ~ .nav-scrim{ opacity:1; pointer-events:auto; }
  .nav-drawer-head{
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:12px;
  }
  .nav-list{
    display:flex;
    flex-direction:column;
    gap:6px;
  }
  .nav-link{
    display:flex;
    align-items:center;
    width:100%;
    padding:10px 12px;
    border-radius:12px;
  }
  .nav-link[aria-current="page"]{
    background:var(--green-soft);
    color:var(--green);
    font-weight:700;
  }
  .nav-auth{
    padding-top:8px;
    border-top:1px solid var(--border);
    flex-wrap:wrap;
  }
}
@media (max-width: 640px){
  .nav-inner{ min-height:60px; }
  .nav-logo img{ height:52px; }
  .nav-toggle-btn{
    width:40px;
    height:40px;
  }
  .nav-links{ width:min(320px, 82vw); }
}
@supports selector(body:has(#nav-toggle:checked)){
  body:has(#nav-toggle:checked){
    overflow:hidden;
    height:100%;
    touch-action:none;
  }
}

/* ================= BUTTONS ================= */
.btn{
  appearance:none;
  border:1px solid var(--border);
  border-radius:12px;
  padding:calc(12px * var(--ui-scale)) calc(18px * var(--ui-scale));
  font-weight:700;
  cursor:pointer;
  transition:transform .12s ease, box-shadow .12s ease, background .12s ease;
  box-shadow:0 6px 12px rgba(15,23,42,0.08);
  text-transform:none;
  letter-spacing:0.01em;
  font-size:calc(14px * var(--ui-scale));
}
.btn-primary{ background:var(--green); color:#fff; border-color:transparent }
.btn-primary:hover{ background:var(--green-hover); }
.btn-outline{ background:#fff; border-color:var(--border); color:var(--ink) }
.btn-outline:hover{ background:rgba(15,118,110,0.08); }
.btn:hover{ transform:translateY(-1px); box-shadow:0 10px 18px rgba(15,23,42,0.12); }
.btn:focus-visible{ outline:3px solid var(--green-soft); outline-offset:2px }

.btn-big,
.btn-large{
  font-size:calc(20px * var(--ui-scale));
  padding:calc(16px * var(--ui-scale)) calc(32px * var(--ui-scale));
}
.btn-small{
  font-size:calc(12px * var(--ui-scale));
  padding:calc(8px * var(--ui-scale)) calc(12px * var(--ui-scale));
}
.text-link{
  font-weight:700;
  color:var(--green);
  text-decoration:none;
  border-bottom:1px dashed rgba(15,118,110,0.45);
  padding-bottom:2px;
}
.text-link:hover{
  color:var(--green-hover);
  border-bottom-color:rgba(15,118,110,0.75);
}

.cancel-premium-fab{
  position:fixed;
  right:24px;
  bottom:24px;
  z-index:40;
  border-color:rgba(15,118,110,0.35);
  background:#fff;
}
@media (max-width: 640px){
  .cancel-premium-fab{
    right:16px;
    bottom:16px;
  }
}

/* ================= SELECT DROPDOWNS ================= */
.select{
  appearance:none;
  -webkit-appearance:none;
  -moz-appearance:none;

  background:#fff;
  border:1px solid var(--border);
  border-radius:12px;
  padding:8px 32px 8px 14px;
  font-size:16px;
  font-weight:600;
  color:var(--text);
  cursor:pointer;
  line-height:1.4;

  background-image:url("data:image/svg+xml;utf8,<svg fill='%23111827' height='24' viewBox='0 0 24 24' width='24' xmlns='http://www.w3.org/2000/svg'><path d='M7 10l5 5 5-5z'/></svg>");
  background-repeat:no-repeat;
  background-position:right 8px center;
  background-size:16px 16px;

  transition:none;
}
.select:hover{ border-color:var(--green); }
.select:focus{ outline:none; border-color:var(--green); box-shadow:none; }

/* CTA spacing below cards */
.demo-cta{ margin-top:48px }

/* ================= REVIEW LIBRARY ================= */
.review-grid{
  display:grid;
  grid-template-columns:repeat(2, minmax(0, 1fr));
  gap:16px;
}
@media (max-width: 900px){
  .review-grid{ grid-template-columns:1fr; }
}
.review-item{
  border:1px solid var(--border);
  border-radius:12px;
  padding:12px 14px;
  background:#fff;
}
.review-item-title{
  font-weight:700;
  color:var(--ink);
}
.review-item-sub{
  margin-top:6px;
  color:var(--text-muted);
  font-size:13px;
}
.review-item-actions{
  margin-top:10px;
  display:flex;
  justify-content:flex-end;
}

/* ================= MODAL ================= */
.modal-backdrop{
  position:fixed;
  inset:0;
  background:rgba(15, 23, 42, 0.45);
  display:flex;
  align-items:center;
  justify-content:center;
  padding:20px;
  z-index:50;
}
.modal-card{
  width:min(560px, 94vw);
  background:var(--card-surface);
  border:var(--card-border);
  border-radius:var(--radius);
  padding:24px;
  box-shadow:var(--shadow);
}
.promo-modal{
  background:
    radial-gradient(140% 120% at 10% 0%, rgba(16,185,129,0.25), transparent 60%),
    radial-gradient(120% 120% at 90% 10%, rgba(14,116,144,0.18), transparent 60%),
    var(--card-surface);
  border:1px solid rgba(16,185,129,0.35);
}
.promo-header{
  text-align:left;
}
.promo-kicker{
  display:inline-flex;
  align-items:center;
  padding:6px 12px;
  border-radius:999px;
  background:rgba(15,118,110,0.12);
  color:var(--ink);
  font-size:12px;
  font-weight:800;
  letter-spacing:0.12em;
  text-transform:uppercase;
}
.promo-title{
  margin:14px 0 8px;
  font-size:clamp(calc(26px * var(--ui-scale)), calc(3.4vw * var(--ui-scale)), calc(34px * var(--ui-scale)));
  font-weight:900;
  color:var(--ink);
  font-family:var(--font-display), var(--font-body), sans-serif;
  letter-spacing:0.02em;
}
.promo-sub{
  margin:0;
  color:var(--ink-soft);
}
.promo-actions{
  display:flex;
  flex-wrap:wrap;
  gap:12px;
  margin-top:18px;
}

/* ================= FORGE PAGE ================= */
.forge-bleed{
  width:100vw;
  margin-left:calc(50% - 50vw);
  padding:0 0 calc(96px * var(--ui-scale));
  background:
    radial-gradient(circle at 20% 10%, rgba(16,185,129,0.22), transparent 40%),
    radial-gradient(circle at 80% 0%, rgba(52,211,153,0.18), transparent 45%),
    linear-gradient(180deg, #0b1b1a 0%, #0d2421 45%, #0f2a27 100%);
}
.page.forge-bleed{
  padding:0 0 calc(96px * var(--ui-scale));
}
.forge-page{
  position:relative;
  width:100%;
  max-width:1280px;
  margin:0 auto;
  border-radius:calc(24px * var(--ui-scale));
  padding:calc(48px * var(--ui-scale)) calc(52px * var(--ui-scale)) calc(64px * var(--ui-scale));
  background:transparent;
  color:#e2e8f0;
  box-shadow:none;
}
.forge-page .page-title{
  font-family:var(--font-body), sans-serif;
  letter-spacing:0;
  font-size:clamp(calc(28px * var(--ui-scale)), calc(3vw * var(--ui-scale)), calc(36px * var(--ui-scale)));
  font-weight:700;
  color:#f8fafc;
}
.forge-page .page-sub{
  font-family:var(--font-body), sans-serif;
}
.forge-page .page-title{
  color:#f8fafc;
}
.forge-page .page-sub{
  color:#e2e8f0;
  max-width:720px;
  font-size:15px;
  line-height:1.6;
}
.leaderboard-page .page-title,
.leaderboard-page .page-sub{
  color:#f8fafc;
}

/* ================= PARTY RESULTS ================= */
.results-page{
  width:100%;
  max-width:1120px;
  margin:0 auto;
  padding:32px 16px 64px;
}
.results-head{
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  gap:16px;
  margin-bottom:12px;
}
.results-kicker{
  font-size:12px;
  letter-spacing:0.18em;
  text-transform:uppercase;
  color:#8aa09b;
  font-weight:700;
}
.results-title{
  margin:6px 0 0;
  font-size:clamp(24px, 3vw, 34px);
  color:#e7f7f1;
  font-family:var(--font-display), var(--font-body), sans-serif;
}
.results-panel{
  background:rgba(10,26,24,0.72);
  border:1px solid rgba(16,185,129,0.4);
  border-radius:18px;
  padding:18px;
  box-shadow:0 18px 36px rgba(6,12,11,0.35);
  display:flex;
  flex-direction:column;
  gap:14px;
}
.results-metrics{
  display:flex;
  flex-wrap:wrap;
  gap:8px;
}
.results-card{
  background:rgba(8,18,16,0.72);
  border:1px solid rgba(52,211,153,0.35);
  border-radius:14px;
  padding:14px 16px;
  box-shadow:inset 0 1px 0 rgba(255,255,255,0.04);
}
.results-card .card-title{ color:#e7f7f1; }
.results-card .card-sub,
.results-card .muted{
  color:#cde4dc;
}
.results-actions{
  display:flex;
  flex-wrap:wrap;
  gap:10px;
  justify-content:flex-start;
}
@media (max-width: 700px){
  .results-panel{ padding:14px; }
  .results-actions .btn{ width:100%; text-align:center; }
}

/* ================= REPORT RESULTS (KAHOOT-STYLE) ================= */
.report-bleed{
  width:100vw;
  margin-left:calc(50% - 50vw);
  padding:calc(32px * var(--ui-scale)) 0 calc(84px * var(--ui-scale));
  background:
    radial-gradient(circle at 20% 10%, rgba(16,185,129,0.22), transparent 40%),
    radial-gradient(circle at 80% 0%, rgba(52,211,153,0.18), transparent 45%),
    linear-gradient(180deg, #0b1b1a 0%, #0d2421 45%, #0f2a27 100%);
}
.report-page{
  width:100%;
  max-width:1160px;
  margin:0 auto;
  padding:calc(32px * var(--ui-scale)) calc(20px * var(--ui-scale)) calc(72px * var(--ui-scale));
  color:#e7f7f1;
}
.report-page .page-title,
.report-page .page-sub{
  color:#e7f7f1;
}
.report-head{
  display:flex;
  align-items:flex-end;
  justify-content:space-between;
  gap:16px;
}
.report-head-actions{
  display:flex;
  align-items:center;
  gap:16px;
}
.report-kicker{
  font-size:12px;
  letter-spacing:0.18em;
  text-transform:uppercase;
  color:#9ab4ab;
  font-weight:700;
}
.report-title{
  margin:6px 0 0;
  font-size:clamp(24px, 3vw, 36px);
  font-family:var(--font-display), var(--font-body), sans-serif;
}
.report-meta{
  display:flex;
  gap:14px;
  color:#b7cec6;
  font-size:13px;
}
.report-tabs{
  display:flex;
  gap:18px;
  border-bottom:1px solid rgba(226,232,240,0.18);
  padding:12px 0 16px;
  margin:10px 0 24px;
}
.report-tab{
  font-weight:700;
  color:#9ab4ab;
  position:relative;
}
.report-tab.is-active{
  color:#e7f7f1;
}
.report-tab.is-active::after{
  content:"";
  position:absolute;
  left:0;
  right:0;
  bottom:-16px;
  height:2px;
  background:#34d399;
}
.report-grid{
  display:grid;
  grid-template-columns:repeat(12, minmax(0, 1fr));
  gap:18px;
}
.report-card{
  background:
    linear-gradient(180deg, rgba(18,33,30,0.92), rgba(10,20,18,0.88));
  border:1px solid rgba(52,211,153,0.28);
  border-radius:16px;
  padding:22px;
  box-shadow:0 16px 32px rgba(6,12,11,0.35);
}
.report-card--wide{
  grid-column:span 6;
  display:flex;
  gap:20px;
  align-items:center;
  background:
    radial-gradient(circle at 12% 50%, rgba(16,185,129,0.18), transparent 55%),
    rgba(12,22,20,0.9);
}
.report-card--stats{ grid-column:span 3; }
.report-card--cta{ grid-column:span 3; }
.report-card--wide .report-summary h2{
  font-size:20px;
}
.report-ring{
  width:96px;
  height:96px;
  border-radius:50%;
  position:relative;
  display:grid;
  place-items:center;
  background:
    conic-gradient(#34d399 0 calc(var(--report-accuracy, 0) * 1%), rgba(148,163,184,0.25) 0 100%);
  padding:10px;
  box-shadow:0 0 20px rgba(16,185,129,0.25);
}
.report-ring::after{
  content:"";
  position:absolute;
  inset:8px;
  border-radius:50%;
  background:rgba(8,18,16,0.9);
  box-shadow:inset 0 0 0 1px rgba(148,163,184,0.25);
}
.report-ring-value{
  font-weight:900;
  font-size:20px;
  text-align:center;
  color:#e7f7f1;
}
.report-ring-value span{
  display:block;
  font-size:11px;
  color:#9ab4ab;
  margin-top:2px;
  text-transform:uppercase;
  letter-spacing:0.14em;
}
.report-summary h2{ margin:0 0 6px; }
.report-card--stats{
  display:grid;
  gap:12px;
}
.report-stat{
  display:flex;
  justify-content:space-between;
  color:#cfe6de;
  background:rgba(8,18,16,0.7);
  border:1px solid rgba(52,211,153,0.25);
  padding:10px 12px;
  border-radius:999px;
}
.report-actions .btn{ min-width:140px; }
.report-stat strong{
  font-weight:800;
}
.report-card--cta .row{ gap:10px; }
.report-lower{
  margin-top:20px;
  display:grid;
  grid-template-columns:repeat(12, minmax(0, 1fr));
  gap:18px;
}
.report-lower .report-card{ grid-column:span 4; }
.report-card-head{
  display:flex;
  align-items:center;
  justify-content:space-between;
  margin-bottom:10px;
}
.report-card h3{
  margin:0;
  font-size:16px;
}
.report-row{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
}
.report-footer{
  margin-top:18px;
}
.report-page .btn-outline{
  background:transparent;
  color:#e7f7f1;
  border-color:rgba(52,211,153,0.45);
  box-shadow:0 0 0 rgba(0,0,0,0);
  transition:transform .15s ease, box-shadow .15s ease;
}
.report-page .btn-primary{
  background:linear-gradient(180deg, #f8c469 0%, #f0a02a 100%);
  border-color:#f0a02a;
  color:#1f2937;
  box-shadow:0 10px 18px rgba(240,160,42,0.35);
  transition:transform .15s ease, box-shadow .15s ease;
}
.report-page .btn-primary:hover,
.report-page .btn-outline:hover{
  transform:scale(1.03);
}
.report-page .badge{
  background:rgba(8,18,16,0.75);
  border-color:rgba(52,211,153,0.4);
  color:#e7f7f1;
}
.report-head-actions{
  align-items:center;
}
.report-head-actions .btn{
  margin-left:6px;
}
.report-card--difficult .badge{
  border-color:rgba(245,158,11,0.6);
  color:#f59e0b;
}
.report-card--help .badge{
  border-color:rgba(245,158,11,0.6);
  color:#f59e0b;
}
.report-card--finish .badge{
  border-color:rgba(248,113,113,0.6);
  color:#f87171;
}
@media (max-width: 900px){
  .report-grid{ grid-template-columns:1fr; }
  .report-card--wide{ flex-direction:column; align-items:flex-start; }
  .report-lower{ grid-template-columns:1fr; }
  .report-meta{ flex-wrap:wrap; }
}
.forge-page .field-label,
.forge-page .field-help,
.forge-page .muted,
.forge-page .card-sub,
.forge-page .badge,
.forge-page .badge-soft,
.forge-page .row .muted{
  color:#f8fafc;
}
.forge-head{
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  gap:24px;
  flex-wrap:wrap;
  margin-bottom:18px;
}
.forge-controls{
  display:flex;
  gap:18px;
  flex-wrap:wrap;
  align-items:flex-start;
  margin-top:2px;
}
.forge-control-group{
  display:flex;
  flex-direction:column;
  gap:8px;
}
.forge-control-label{
  font-size:12px;
  text-transform:uppercase;
  letter-spacing:0.14em;
  color:#e2e8f0;
  font-weight:700;
}
.forge-button-row{
  display:flex;
  gap:8px;
  flex-wrap:wrap;
}
.forge-pill{
  border:1px solid rgba(226,232,240,0.35);
  background:#0d1f1c;
  color:#f8fafc;
  padding:6px 14px;
  border-radius:999px;
  font-size:12px;
  font-weight:700;
  letter-spacing:0.04em;
  cursor:pointer;
  transition:all .15s ease;
}
.forge-pill.is-active{
  border-color:#34d399;
  background:rgba(52,211,153,0.22);
  color:#f8fafc;
  box-shadow:0 0 0 2px rgba(52,211,153,0.22);
}
.forge-form{
  background:transparent;
  border:none;
  padding:0;
}
.forge-tabs{
  display:flex;
  gap:22px;
  border-bottom:1px solid rgba(226,232,240,0.2);
  padding:10px 0 16px;
}
.forge-tab{
  background:none;
  border:none;
  color:#e2e8f0;
  font-weight:600;
  font-size:14px;
  cursor:pointer;
  padding:6px 0;
  border-bottom:2px solid transparent;
}
.forge-tab.is-active{
  color:#f8fafc;
  border-color:#34d399;
}
.forge-upload{
  position:relative;
  border:2px dashed rgba(226,232,240,0.25);
  border-radius:18px;
  padding:56px 24px;
  background:rgba(10,26,24,0.55);
  text-align:center;
  margin-top:16px;
  min-height:300px;
}
.forge-upload-inner{
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:10px;
  pointer-events:none;
}
.forge-upload-icons{
  display:flex;
  gap:10px;
}
.forge-file-badge{
  padding:7px 12px;
  border-radius:12px;
  background:#0f2a27;
  color:#f8fafc;
  font-weight:700;
  font-size:11px;
  letter-spacing:0.08em;
}
.forge-upload-title{
  font-size:16px;
  font-weight:600;
  color:#f8fafc;
}
.forge-upload-sub{
  font-size:13px;
  color:#e2e8f0;
}
.forge-upload-btn{
  margin-top:8px;
  background:#ffffff;
  color:#0f172a;
  border-radius:999px;
  padding:10px 18px;
  font-weight:600;
  font-size:14px;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  box-shadow:0 8px 16px rgba(15,23,42,0.25);
}
.forge-file-list{
  display:flex;
  flex-direction:column;
  gap:8px;
}
.forge-file-row{
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:12px;
}
.forge-text .textarea{
  min-height:140px;
}
.forge-page .input,
.forge-page .textarea,
.forge-page .select{
  background:#0d1f1c;
  border-color:#263f39;
  color:#e2e8f0;
  border-radius:14px;
}
.deck-cta-row--center{
  justify-content:center;
}
.forge-page .input::placeholder,
.forge-page .textarea::placeholder{
  color:#94a3b8;
}
.forge-card{
  background:rgba(10,26,24,0.65);
  border:1px solid rgba(226,232,240,0.18);
  color:#f8fafc;
  box-shadow:0 12px 24px rgba(15,23,42,0.35);
}
.forge-page .card--error{
  background:rgba(127,29,29,0.6);
  border-color:#ef4444;
  color:#fecaca;
}
@media (max-width: 900px){
  .forge-bleed{
    padding:24px 0 48px;
  }
  .forge-page{
    padding:22px;
  }
  .forge-controls{
    width:100%;
    justify-content:flex-start;
  }
}
.forge-modal{
  width:min(980px, 96vw);
  padding:calc(36px * var(--ui-scale));
  background:#fff;
  border:1px solid #e5e7eb;
  box-shadow:0 18px 40px rgba(15,23,42,0.15);
}
.forge-grid{
  display:grid;
  grid-template-columns:minmax(0, 1.05fr) minmax(0, 0.95fr);
  gap:calc(28px * var(--ui-scale));
  align-items:stretch;
}
.forge-kicker{
  display:inline-flex;
  align-items:center;
  padding:6px 12px;
  border-radius:999px;
  background:rgba(15,118,110,0.12);
  color:var(--ink);
  font-size:12px;
  font-weight:800;
  letter-spacing:0.12em;
  text-transform:uppercase;
}
.forge-title{
  margin:12px 0 8px;
  font-size:clamp(calc(30px * var(--ui-scale)), calc(4vw * var(--ui-scale)), calc(44px * var(--ui-scale)));
  font-weight:900;
  color:var(--ink);
  font-family:var(--font-display), var(--font-body), sans-serif;
  letter-spacing:0.02em;
}
.forge-sub{
  margin:0;
  color:var(--ink-soft);
}
.forge-badges{
  display:flex;
  flex-wrap:wrap;
  gap:calc(10px * var(--ui-scale));
}
.forge-actions{
  display:flex;
  flex-wrap:wrap;
  gap:calc(12px * var(--ui-scale));
  align-items:center;
}
.forge-drop{
  position:relative;
  border:2px dashed #cbd5f5;
  border-radius:18px;
  padding:calc(26px * var(--ui-scale));
  min-height:calc(220px * var(--ui-scale));
  background:#f8fafc;
  display:flex;
  align-items:center;
  justify-content:center;
  text-align:center;
  transition:all 0.2s ease;
}
.forge-drop.is-dragging{
  border-color:#2563eb;
  background:#eff6ff;
  box-shadow:0 0 0 3px rgba(37,99,235,0.18);
}
.forge-file-input{
  position:absolute;
  inset:0;
  opacity:0;
  cursor:pointer;
}
.forge-drop-inner{
  display:flex;
  flex-direction:column;
  gap:10px;
  align-items:center;
  pointer-events:none;
}
.forge-drop-title{
  font-weight:800;
  font-size:18px;
  color:var(--ink);
}
.forge-drop-hint{
  color:var(--ink-soft);
  font-size:13px;
}
.forge-drop-action{
  font-size:13px;
  font-weight:700;
  color:#0f766e;
}
.forge-file-list{
  display:flex;
  flex-direction:column;
  gap:8px;
}
.forge-file-row{
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:12px;
}
.forge-complete-card{
  background:
    radial-gradient(140% 120% at 0% 0%, rgba(244,114,182,0.16), transparent 60%),
    var(--card-surface);
  border:1px solid rgba(244,114,182,0.35);
}
@media (max-width: 860px){
  .forge-modal{
    padding:28px;
  }
  .forge-grid{
    grid-template-columns:1fr;
  }
}

/* ================= HOME LAYOUT ================= */
.hero-slab{
  position:relative;
  padding:72px 0 48px;
  z-index:0;
}
.hero-slab--glow::before{
  content:"";
  position:absolute;
  left:-28px;
  right:-28px;
  top:-18px;
  bottom:-18px;
  display:none;
}
.sparkle-layer::after{
  content:"";
  position:absolute;
  inset:-10px;
  background-image:
    radial-gradient(2px 2px at 12% 18%, rgba(15,118,110,0.25) 50%, transparent 55%),
    radial-gradient(2px 2px at 28% 68%, rgba(16,185,129,0.18) 50%, transparent 55%),
    radial-gradient(2px 2px at 74% 26%, rgba(15,118,110,0.22) 50%, transparent 55%),
    radial-gradient(2px 2px at 86% 72%, rgba(16,185,129,0.22) 50%, transparent 55%);
  pointer-events:none;
}
.hero-grid{
  display:grid;
  grid-template-columns:1.05fr 0.95fr;
  gap:52px;
  align-items:center;
}
.hero-copy{
  gap:28px;
  max-width:700px;
}
.hero-kicker{
  margin:0;
  font-size:12px;
  text-transform:uppercase;
  letter-spacing:0.14em;
  color:var(--text-muted);
  font-weight:700;
}
.hero-cta{
  gap:12px;
}
.btn-hero{
  padding:14px 26px;
  font-size:15px;
  min-width:220px;
  border-radius:999px;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  box-shadow:0 10px 18px rgba(15,23,42,0.12);
}
.btn-hero:hover{
  box-shadow:0 14px 22px rgba(15,23,42,0.14);
}

/* ================= PIXEL HOME ENHANCEMENTS ================= */
.pixel-home .hero-slab{
  padding:96px 0 72px;
}
.pixel-home .hero-slab--glow::before{
  display:block;
  left:50%;
  right:auto;
  top:-64px;
  bottom:-40px;
  width:100vw;
  transform:translateX(-50%);
  border-radius:0;
  background-image:
    linear-gradient(180deg, rgba(248,250,252,0) 72%, rgba(248,250,252,0.92) 96%, rgba(248,250,252,1) 100%),
    url("/assets/pixel-sky.png");
  background-size:100% 100%, cover;
  background-position:center, center;
  background-repeat:no-repeat;
  image-rendering:pixelated;
  z-index:-2;
}
.pixel-home .sparkle-layer::after{
  inset:-40px;
  background-image:
    radial-gradient(2px 2px at 12% 18%, rgba(255,255,255,0.75) 50%, transparent 55%),
    radial-gradient(2px 2px at 28% 68%, rgba(255,255,255,0.7) 50%, transparent 55%),
    radial-gradient(2px 2px at 74% 26%, rgba(255,255,255,0.7) 50%, transparent 55%),
    radial-gradient(2px 2px at 86% 72%, rgba(255,255,255,0.7) 50%, transparent 55%),
    radial-gradient(1px 1px at 42% 35%, rgba(255,255,255,0.6) 50%, transparent 55%),
    radial-gradient(1px 1px at 62% 58%, rgba(255,255,255,0.55) 50%, transparent 55%);
  opacity:0.7;
  mix-blend-mode:screen;
}
.pixel-home .hero-panel{
  border-radius:16px;
  border:2px solid #2A163D;
  background:
    linear-gradient(180deg, rgba(255,255,255,0.98), rgba(244,247,255,0.95)),
    repeating-linear-gradient(90deg, rgba(42,22,61,0.08) 0 1px, transparent 1px 10px);
  box-shadow:
    0 0 0 4px rgba(255,255,255,0.5),
    10px 10px 0 rgba(42,22,61,0.25);
}

/* ================= DASHBOARD CASTLE BG ================= */
.dashboard-castle{
  position:relative;
}
.dashboard-castle::before{
  content:"";
  position:absolute;
  left:50%;
  right:auto;
  top:-40px;
  bottom:-60px;
  width:100vw;
  transform:translateX(-50%);
  background-image:url("/assets/pixel-sky.png");
  background-size:cover;
  background-position:center;
  background-repeat:no-repeat;
  image-rendering:pixelated;
  z-index:-2;
}

/* ================= DASHBOARD (Khan-style) ================= */
.dashboard-ka{
  padding:calc(24px * var(--ui-scale)) 0 calc(60px * var(--ui-scale));
  width:100vw;
  margin-left:calc(50% - 50vw);
  background:
    radial-gradient(circle at 18% 10%, rgba(16,185,129,0.16), transparent 40%),
    radial-gradient(circle at 82% 8%, rgba(52,211,153,0.12), transparent 45%),
    linear-gradient(180deg, #0b1b1a 0%, #0d2421 45%, #0f2a27 100%);
}
.dashboard-ka.dashboard-castle::before{
  display:none;
}
.ka-streak-bar{
  max-width:var(--maxw);
  margin:0 auto calc(18px * var(--ui-scale));
  padding:calc(10px * var(--ui-scale)) calc(20px * var(--ui-scale));
  background:rgba(9,18,17,0.72);
  border:1px solid rgba(16,185,129,0.35);
  border-radius:calc(10px * var(--ui-scale));
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:calc(12px * var(--ui-scale));
  color:#e2e8f0;
  font-weight:600;
}
.ka-streak-left{
  font-size:calc(13px * var(--ui-scale));
}
.ka-streak-right{
  display:flex;
  align-items:center;
  gap:calc(14px * var(--ui-scale));
  flex-wrap:wrap;
}
.ka-streak-chip{
  display:inline-flex;
  align-items:center;
  gap:6px;
  font-size:calc(12px * var(--ui-scale));
  color:#a7f3d0;
}
.ka-streak-icon{
  font-size:calc(10px * var(--ui-scale));
  color:#34d399;
}
.ka-streak-level{
  display:flex;
  align-items:center;
  gap:8px;
  font-size:calc(12px * var(--ui-scale));
  color:#e2e8f0;
}
.ka-streak-progress{
  width:140px;
  height:6px;
  background:rgba(226,232,240,0.18);
  border-radius:999px;
  overflow:hidden;
}
.ka-streak-progress > span{
  display:block;
  height:100%;
  background:linear-gradient(90deg, #10b981, #34d399);
}
.ka-streak-skill{
  font-size:calc(11px * var(--ui-scale));
  color:rgba(226,232,240,0.7);
}
.ka-header{
  max-width:var(--maxw);
  margin:0 auto calc(18px * var(--ui-scale));
  padding:calc(16px * var(--ui-scale)) calc(20px * var(--ui-scale));
  background:rgba(9,18,17,0.72);
  border:1px solid rgba(16,185,129,0.35);
  border-radius:calc(12px * var(--ui-scale));
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:calc(20px * var(--ui-scale));
  box-shadow:none;
}
.ka-profile{
  display:flex;
  align-items:center;
  gap:calc(14px * var(--ui-scale));
}
.ka-profile-avatar{
  width:52px;
  height:52px;
  border-radius:12px;
  border:1px solid rgba(16,185,129,0.35);
  background:#fff;
  object-fit:contain;
}
.ka-profile-name{
  font-size:calc(22px * var(--ui-scale));
  font-weight:800;
  color:#f8fafc;
}
.ka-profile-sub{
  color:rgba(226,232,240,0.7);
  font-size:calc(13px * var(--ui-scale));
}
.ka-header-actions{
  display:flex;
  align-items:center;
  gap:calc(16px * var(--ui-scale));
}
.ka-edit-btn{
  border:1px solid rgba(16,185,129,0.35);
  background:rgba(226,232,240,0.12);
  color:#f8fafc;
  padding:calc(8px * var(--ui-scale)) calc(14px * var(--ui-scale));
  border-radius:calc(8px * var(--ui-scale));
  font-weight:700;
  text-decoration:none;
  font-size:calc(13px * var(--ui-scale));
}
.ka-level{
  display:flex;
  flex-direction:column;
  gap:6px;
  min-width:200px;
}
.ka-level-chip{
  display:inline-flex;
  align-items:center;
  gap:6px;
  font-weight:800;
  color:#a7f3d0;
  font-size:calc(12px * var(--ui-scale));
}
.ka-progress{
  height:8px;
  background:rgba(226,232,240,0.18);
  border-radius:999px;
  overflow:hidden;
}
.ka-progress > span{
  display:block;
  height:100%;
  background:linear-gradient(90deg, #10b981, #34d399);
}
.ka-progress-text{
  font-size:calc(11px * var(--ui-scale));
  color:rgba(226,232,240,0.7);
}
.ka-body{
  max-width:var(--maxw);
  margin:0 auto;
  display:grid;
  grid-template-columns:220px 1fr;
  gap:calc(22px * var(--ui-scale));
}
.ka-sidebar{
  background:rgba(9,18,17,0.72);
  border:1px solid rgba(16,185,129,0.35);
  border-radius:calc(12px * var(--ui-scale));
  padding:calc(18px * var(--ui-scale));
  box-shadow:none;
  height:fit-content;
}
.ka-sidebar-section{
  margin-bottom:calc(18px * var(--ui-scale));
}
.ka-sidebar-title{
  font-size:calc(11px * var(--ui-scale));
  letter-spacing:0.1em;
  text-transform:uppercase;
  color:rgba(226,232,240,0.6);
  font-weight:800;
  margin-bottom:calc(8px * var(--ui-scale));
}
.ka-nav{
  display:flex;
  width:100%;
  padding:calc(8px * var(--ui-scale)) calc(10px * var(--ui-scale));
  border-radius:calc(8px * var(--ui-scale));
  border:none;
  background:transparent;
  text-align:left;
  color:#e2e8f0;
  font-weight:600;
  cursor:pointer;
}
.ka-nav.is-active{
  background:rgba(16,185,129,0.12);
  color:#a7f3d0;
}
.ka-main{
  background:rgba(9,18,17,0.72);
  border:1px solid rgba(16,185,129,0.35);
  border-radius:calc(12px * var(--ui-scale));
  padding:calc(18px * var(--ui-scale));
  display:flex;
  flex-direction:column;
  gap:calc(22px * var(--ui-scale));
}
.ka-section{
  background:transparent;
  border:none;
  border-radius:0;
  padding:0;
  box-shadow:none;
}
.ka-section-head{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
  margin-bottom:calc(14px * var(--ui-scale));
}
.ka-section-title{
  margin:0;
  font-size:calc(20px * var(--ui-scale));
  font-weight:800;
  color:#f8fafc;
}
.ka-course-grid{
  display:grid;
  grid-template-columns:repeat(2, minmax(0, 1fr));
  gap:calc(18px * var(--ui-scale));
  border-top:1px solid rgba(148,163,184,0.25);
  padding-top:calc(12px * var(--ui-scale));
}
.ka-course-col{
  display:flex;
  flex-direction:column;
  gap:calc(12px * var(--ui-scale));
}
.ka-course-row{
  padding-bottom:calc(12px * var(--ui-scale));
  border-bottom:1px solid rgba(148,163,184,0.25);
}
.ka-course-title{
  font-weight:700;
  color:#a7f3d0;
  text-decoration:none;
}
.ka-course-title:hover{
  text-decoration:underline;
}
.ka-course-meta{
  display:flex;
  gap:10px;
  font-size:calc(12px * var(--ui-scale));
  color:rgba(226,232,240,0.6);
  margin-top:4px;
}
.ka-course-actions{
  display:flex;
  gap:12px;
  align-items:center;
  margin-top:6px;
}
.ka-start-btn{
  background:#10b981;
  color:#fff;
  border:none;
  border-radius:6px;
  padding:calc(6px * var(--ui-scale)) calc(12px * var(--ui-scale));
  font-weight:700;
  cursor:pointer;
}
.ka-link{
  background:none;
  border:none;
  color:#a7f3d0;
  font-weight:600;
  cursor:pointer;
  padding:0;
}
.ka-empty{
  color:rgba(226,232,240,0.7);
}
.ka-empty-actions{
  display:flex;
  gap:12px;
  margin-top:12px;
  flex-wrap:wrap;
}

@media (max-width: 980px){
  .ka-body{
    grid-template-columns:1fr;
  }
  .ka-header{
    flex-direction:column;
    align-items:flex-start;
  }
  .ka-header-actions{
    width:100%;
    justify-content:space-between;
  }
  .ka-course-grid{
    grid-template-columns:1fr;
  }
}
.pixel-home .panel--hero-frame{
  border-radius:16px;
  border:2px solid #2A163D;
  box-shadow:
    0 0 0 4px rgba(255,255,255,0.5),
    10px 10px 0 rgba(42,22,61,0.25);
}
.pixel-home .panel--hero-frame::after{
  border-radius:16px;
  opacity:0.3;
}
.pixel-home .panel--hero-frame .chapter-head{
  font-size:15px;
}
.pixel-home .quest-panel::after{
  opacity:0.3;
}
.pixel-home .page-title{
  text-shadow:0 2px 0 rgba(42,22,61,0.35);
}
.pixel-home .page-sub{
  color:rgba(15,23,42,0.7);
}
.pixel-home .btn-hero{
  border-radius:8px;
  box-shadow:0 0 0 2px #2A163D, 4px 4px 0 rgba(42,22,61,0.35);
  text-transform:uppercase;
  letter-spacing:0.06em;
}
.pixel-home .btn-hero:hover{
  transform:translate(-1px, -1px);
  box-shadow:0 0 0 2px #2A163D, 6px 6px 0 rgba(42,22,61,0.4);
}
.pixel-home .quest-card,
.pixel-home .card{
  border-radius:14px;
  border:2px solid rgba(42,22,61,0.5);
  box-shadow:8px 8px 0 rgba(42,22,61,0.18);
}
.pixel-home .card--hero-frame{
  border:2px solid #2A163D;
  box-shadow:
    0 0 0 3px rgba(255,255,255,0.55),
    6px 6px 0 rgba(42,22,61,0.25);
}
.pixel-home .quest-card:hover{
  transform:translate(-2px, -2px);
  box-shadow:10px 10px 0 rgba(42,22,61,0.24);
}
.pixel-home .pixel-frame{
  border-radius:16px;
  border:2px solid rgba(42,22,61,0.6);
  background:rgba(15,23,42,0.08);
  box-shadow:0 0 0 4px rgba(255,255,255,0.6), 8px 8px 0 rgba(42,22,61,0.25);
  padding:12px;
}
.pixel-home .hero-image{
  border-radius:10px;
  box-shadow:0 18px 24px rgba(15,23,42,0.18);
}
@media (max-width: 900px){
  .pixel-home .hero-slab{
    padding:72px 0 56px;
  }
  .pixel-home .hero-slab--glow::before{
    top:-48px;
    bottom:-28px;
    background-position:center top;
  }
}
@media (max-width: 640px){
  .pixel-home .hero-slab{
    padding:48px 0 36px;
  }
  .pixel-home .hero-slab--glow::before{
    top:-32px;
    bottom:-18px;
    background-image:
      linear-gradient(180deg, rgba(124,58,237,0.28) 0%, rgba(192,38,211,0.22) 45%, rgba(249,115,22,0.18) 75%, rgba(248,250,252,0.9) 100%);
    background-size:100% 100%;
    background-position:center;
    image-rendering:auto;
  }
  .pixel-home .sparkle-layer::after{
    inset:-24px;
    opacity:0.55;
  }
  .pixel-home .hero-panel{
    box-shadow:
      0 0 0 3px rgba(255,255,255,0.55),
      6px 6px 0 rgba(42,22,61,0.22);
  }
  .pixel-home .panel--hero-frame{
    box-shadow:
      0 0 0 3px rgba(255,255,255,0.55),
      6px 6px 0 rgba(42,22,61,0.22);
  }
  .pixel-home .quest-card,
  .pixel-home .card{
    box-shadow:6px 6px 0 rgba(42,22,61,0.2);
  }
  .pixel-home .card--hero-frame{
    box-shadow:
      0 0 0 2px rgba(255,255,255,0.55),
      5px 5px 0 rgba(42,22,61,0.22);
  }
  .pixel-home .btn-hero{
    letter-spacing:0.04em;
  }
}
.hero-links{
  display:flex;
  flex-wrap:wrap;
  gap:14px;
  align-items:center;
  font-weight:700;
}
.hero-link{
  color:var(--green);
  text-decoration:none;
  border-bottom:1px dashed rgba(15,118,110,0.45);
  padding-bottom:2px;
}
.hero-link:hover{
  color:var(--green-hover);
  border-bottom-color:rgba(15,118,110,0.75);
}
.hero-party{
  gap:12px;
}
.hero-avatars{
  display:flex;
  gap:12px;
  flex-wrap:wrap;
}
.hero-avatars .avatar{
  width:108px;
  height:108px;
  border-radius:24px;
}
@media (max-width: 640px){
  .hero-slab{ padding:36px 0 20px; }
  .hero-copy{ gap:16px; }
  .hero-cta{
    flex-direction:column;
    align-items:stretch;
    width:100%;
  }
  .hero-cta .btn{
    width:100%;
    text-align:center;
    display:flex;
    justify-content:center;
  }
  .btn-hero{ width:100%; }
  .hero-grid{ gap:20px; }
  .hero-party{
    flex-direction:column;
    align-items:flex-start;
  }
  .hero-avatars{ gap:8px; }
  .hero-avatars .avatar{
    width:76px;
    height:76px;
    border-radius:18px;
  }
}
.hero-media{
  min-height:320px;
  display:flex;
  align-items:center;
  padding:14px;
  position:relative;
}
.hero-media--plain{
  padding:0;
  background:transparent;
  border:none;
  box-shadow:none;
}
@media (max-width: 640px){
  .hero-media{ min-height:0; padding:10px; }
  .hero-media--plain{ padding:0; }
  .hero-media-inner{ display:flex; justify-content:center; }
  .hero-image{
    width:min(100%, 320px);
    max-height:220px;
    object-fit:contain;
  }
}
.hero-media-inner{
  position:relative;
  width:100%;
}
.hero-image{
  width:100%;
  height:auto;
  display:block;
  border-radius:18px;
  image-rendering:auto;
  box-shadow:0 10px 20px rgba(15,23,42,0.14);
  transition:transform .25s ease, box-shadow .25s ease;
  will-change:transform;
}
.hero-media:hover .hero-image{
  transform:translateY(-4px) scale(1.02);
  box-shadow:0 14px 24px rgba(15,23,42,0.16);
}
@media (prefers-reduced-motion: no-preference){
  @media (max-width: 900px){
    .hero-media--plain .hero-image{
      animation:hero-float 6s ease-in-out infinite;
    }
  }
}
@keyframes hero-float{
  0%, 100%{ transform:translateY(0); }
  50%{ transform:translateY(-6px); }
}
.arena-points{
  display:grid;
  gap:16px;
}
.arena-point{
  padding:16px 18px;
  border-radius:var(--radius);
  border:var(--card-border);
  background:var(--card-surface);
  box-shadow:var(--shadow);
}
.arena-point p{
  margin:6px 0 0;
}
.hero-mascot{
  width:72px;
  height:auto;
  image-rendering:pixelated;
  flex-shrink:0;
  filter:drop-shadow(0 10px 18px rgba(15,23,42,0.18));
}
.path-label{
  margin:0;
  font-size:12px;
  text-transform:uppercase;
  letter-spacing:0.2em;
  font-family:var(--font-display), var(--font-body), sans-serif;
  color:var(--text-muted);
}
.path-grid{
  display:grid;
  grid-template-columns:repeat(3, minmax(0, 1fr));
  gap:20px;
}
.mode-grid{
  display:grid;
  grid-template-columns:repeat(2, minmax(0, 1fr));
  gap:20px;
}
.mode-card{
  gap:14px;
  min-height:260px;
}
.mode-steps{
  display:flex;
  flex-direction:column;
  gap:8px;
  margin-top:4px;
}
.mode-step{
  display:flex;
  align-items:center;
  gap:10px;
  color:var(--ink);
  font-size:14px;
}
.quest-card{
  display:flex;
  flex-direction:column;
  gap:10px;
  padding:24px;
  border-radius:var(--radius);
  border:var(--card-border);
  background:var(--card-surface);
  box-shadow:var(--shadow);
  transition:transform .15s ease, box-shadow .15s ease, border-color .15s ease;
}
.quest-card:hover{
  transform:translateY(-2px);
  border-color:rgba(15,118,110,0.35);
  box-shadow:0 22px 40px rgba(15,23,42,0.16);
}
.path-meta{
  text-transform:uppercase;
  letter-spacing:0.14em;
  font-size:11px;
  color:var(--text-muted);
  font-weight:700;
}
.inventory-grid{
  display:grid;
  grid-template-columns:repeat(2, minmax(0, 1fr));
  gap:14px;
}
.inventory-slot{
  display:flex;
  align-items:center;
  gap:10px;
  padding:14px 16px;
  border-radius:var(--radius);
  border:var(--card-border);
  background:var(--card-surface);
  box-shadow:var(--shadow);
  transition:transform .15s ease, box-shadow .15s ease, border-color .15s ease;
}
.inventory-slot:hover{
  transform:translateY(-2px);
  border-color:rgba(15,118,110,0.4);
  box-shadow:inset 0 2px 0 rgba(255,255,255,0.7), 0 14px 26px rgba(15,23,42,0.14);
}
.inventory-slot strong{ display:block; font-size:13px; color:var(--ink); }
.inventory-slot .muted{ font-size:12px; }
@media (max-width: 640px){
  .quest-card{ padding:18px; }
  .path-grid,
  .mode-grid,
  .steps-grid,
  .two-col,
  .split-grid{ gap:14px; }
  .mode-card{ min-height:0; }
  .path-meta{ font-size:10px; }
  .inventory-slot{ padding:12px 14px; }
  .inventory-slot strong{ font-size:12px; }
}
.slot-icon{
  width:20px;
  height:20px;
  background:var(--green);
  mask:var(--icon-mask) no-repeat center / contain;
  -webkit-mask:var(--icon-mask) no-repeat center / contain;
  flex-shrink:0;
}
.slot-icon--deck{
  --icon-mask:url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'><rect x='2' y='3' width='5' height='10' fill='black'/><rect x='9' y='3' width='5' height='10' fill='black'/><rect x='7' y='3' width='1' height='10' fill='black'/></svg>");
}
.slot-icon--key{
  --icon-mask:url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'><rect x='2' y='7' width='8' height='2' fill='black'/><rect x='10' y='6' width='2' height='4' fill='black'/><rect x='12' y='7' width='2' height='2' fill='black'/><rect x='3' y='4' width='3' height='3' fill='black'/><rect x='4' y='3' width='1' height='1' fill='black'/></svg>");
}
.slot-icon--party{
  --icon-mask:url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'><rect x='1' y='6' width='4' height='4' fill='black'/><rect x='6' y='4' width='4' height='4' fill='black'/><rect x='11' y='6' width='4' height='4' fill='black'/></svg>");
}
.slot-icon--mode{
  --icon-mask:url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'><rect x='7' y='1' width='2' height='4' fill='black'/><rect x='7' y='11' width='2' height='4' fill='black'/><rect x='1' y='7' width='4' height='2' fill='black'/><rect x='11' y='7' width='4' height='2' fill='black'/><rect x='6' y='6' width='4' height='4' fill='black'/></svg>");
}
.quest-panel{
  padding:48px 48px 54px;
  border-radius:24px;
  border:1px solid rgba(15,118,110,0.24);
  box-shadow:0 18px 36px rgba(15,23,42,0.1);
  position:relative;
}
.hero-panel{
  padding:56px 56px 64px;
}
@media (max-width: 640px){
  .quest-panel{ padding:20px; }
  .hero-panel{ padding:22px; }
}
.cta-panel{
  text-align:center;
  padding:0;
  background:transparent;
  border:none;
  box-shadow:none;
}
.cta-panel::after{
  display:none;
}
.cta-panel.panel--stone{
  background:transparent;
  border:none;
  box-shadow:none;
}
.quest-panel::after{
  content:"";
  position:absolute;
  inset:0;
  border-radius:24px;
  background:none;
  pointer-events:none;
  opacity:0.6;
}
.quest-panel.cta-panel::after{
  display:none;
}
.quest-panel > *{ position:relative; z-index:1; }
.panel--stone{
  background:var(--panel-surface);
  border-color:rgba(148,163,184,0.35);
  box-shadow:inset 0 2px 0 rgba(255,255,255,0.6), 0 24px 48px rgba(15,23,42,0.12);
}
.panel--parchment{
  background:var(--panel-surface);
  border-color:rgba(15,118,110,0.32);
}
.panel--notice{
  background:var(--panel-surface);
  border-color:rgba(15,118,110,0.24);
}
.panel--journal{
  background:var(--panel-surface);
  border-color:rgba(148,163,184,0.35);
}
.orn-divider{
  height:2px;
  width:100%;
  margin:28px 0 32px;
  background:linear-gradient(90deg, rgba(15,118,110,0), rgba(15,118,110,0.7), rgba(15,118,110,0));
  position:relative;
}
.orn-divider::after{
  content:"";
  position:absolute;
  left:50%;
  top:-6px;
  width:12px;
  height:12px;
  transform:translateX(-50%) rotate(45deg);
  border:2px solid rgba(15,118,110,0.6);
  background:#fff;
}
.slab{
  position:relative;
  padding:72px 0;
  z-index:0;
}
.slab > *{ position:relative; z-index:1; }
@media (max-width: 640px){
  .slab{ padding:40px 0; }
  .orn-divider{ margin:16px 0 20px; }
}
.slab--steps::before,
.slab--showcase::before,
.slab--features::before,
.slab--rating::before{
  content:"";
  display:none;
  position:absolute;
  left:-22px;
  right:-22px;
  top:0;
  bottom:0;
  border-radius:26px;
  z-index:-1;
}
.slab--steps::before{
  background:linear-gradient(120deg, rgba(15,118,110,0.10), rgba(15,118,110,0.02));
  border:1px solid rgba(15,118,110,0.14);
}
.slab--showcase::before{
  background:linear-gradient(120deg, rgba(15,118,110,0.1), rgba(255,255,255,0.1));
  border:1px solid rgba(15,118,110,0.18);
}
.slab--features::before{
  background:linear-gradient(120deg, rgba(15,23,42,0.04), rgba(255,255,255,0.3));
  border:1px solid rgba(15,23,42,0.08);
}
.slab--rating::before{
  background:linear-gradient(120deg, rgba(15,118,110,0.08), rgba(15,118,110,0.03));
  border:1px solid rgba(15,118,110,0.12);
}
.slab-header,
.section-header{
  display:flex;
  flex-direction:column;
  gap:6px;
  margin-bottom:32px;
  max-width:720px;
}
@media (max-width: 640px){
  .slab-header,
  .section-header{
    gap:4px;
    margin-bottom:20px;
  }
}
.section-title{
  font-size:clamp(calc(22px * var(--ui-scale)), calc(2.8vw * var(--ui-scale)), calc(32px * var(--ui-scale)));
  margin:0;
  color:var(--ink);
  font-weight:900;
  font-family:var(--font-display), var(--font-body), sans-serif;
  letter-spacing:0.02em;
}
.pixel-title{
  font-family:var(--font-display), var(--font-body), sans-serif;
  letter-spacing:0.02em;
  line-height:1.25;
}
.pixel-ui .page-title,
.pixel-ui .section-title,
.pixel-ui .card-title,
.pixel-ui .hero-kicker,
.pixel-ui .badge,
.pixel-ui .btn,
.pixel-ui .path-meta,
.pixel-ui .path-label,
.pixel-ui .rating-score,
.pixel-ui .testimonial-author,
.pixel-ui .achievement-title{
  font-family:var(--font-display), var(--font-body), sans-serif;
}
.pixel-ui .btn{
  letter-spacing:0.04em;
  text-transform:uppercase;
  font-size:13px;
}
.pixel-ui .badge{
  letter-spacing:0.08em;
  font-size:10px;
}
.pixel-ui .card{
  background:var(--card-surface);
  border:var(--card-border);
  box-shadow:var(--shadow);
}
@media (max-width: 640px){
  .pixel-ui .btn{
    font-size:12px;
    letter-spacing:0.03em;
  }
  .pixel-ui .page-title,
  .pixel-ui .section-title{
    letter-spacing:0.01em;
  }
  .pixel-ui .card{
    box-shadow:0 10px 18px rgba(15,23,42,0.08);
  }
  .pixel-title{ line-height:1.15; }
}
.section-sub{
  margin:0;
  color:var(--text-muted);
}
@media (max-width: 640px){
  .section-title{
    font-size:clamp(calc(18px * var(--ui-scale)), calc(5.6vw * var(--ui-scale)), calc(22px * var(--ui-scale)));
    line-height:1.15;
    max-width:24ch;
    text-wrap:balance;
  }
  .section-sub{
    font-size:14px;
    line-height:1.55;
    max-width:44ch;
  }
}
.chapter-head{
  display:flex;
  align-items:center;
  gap:16px;
  text-transform:uppercase;
  letter-spacing:0.22em;
  font-size:13px;
  color:var(--text-muted);
  font-weight:700;
  font-family:var(--font-display), var(--font-body), sans-serif;
}
.chapter-head--hero{
  font-size:15px;
}
@media (max-width: 640px){
  .chapter-head{
    flex-wrap:wrap;
    gap:8px;
    font-size:11px;
    letter-spacing:0.16em;
  }
  .chapter-head--hero{ font-size:12px; }
  .chapter-line{ flex-basis:100%; }
}
.chapter-pill{
  color:var(--green);
  font-family:var(--font-display), var(--font-body), sans-serif;
}
.chapter-title{
  color:var(--ink);
  font-family:var(--font-display), var(--font-body), sans-serif;
  font-size:14px;
}
.chapter-line{
  flex:1;
  height:1px;
  background:linear-gradient(90deg, rgba(15,118,110,0.4), rgba(15,118,110,0));
}
.quest-scroll{
  background:var(--card-surface);
  border:var(--card-border);
  position:relative;
}
.quest-scroll::before,
.quest-scroll::after{
  content:"";
  position:absolute;
  left:14px;
  right:14px;
  height:4px;
  background:linear-gradient(90deg, rgba(15,118,110,0.35), rgba(15,118,110,0));
  opacity:0.7;
}
.quest-scroll::before{ top:10px; }
.quest-scroll::after{ bottom:10px; }
.guide-card{
  display:flex;
  align-items:center;
  gap:12px;
  padding:12px 14px;
  border-radius:16px;
  border:2px solid rgba(15,118,110,0.35);
  background:linear-gradient(180deg, rgba(240,253,250,0.9), rgba(255,255,255,1));
  box-shadow:inset 0 2px 0 rgba(255,255,255,0.8), 0 12px 24px rgba(15,23,42,0.12);
  margin-top:22px;
}
.guide-card--inline{
  max-width:520px;
}
.guide-card--center{
  margin:24px auto 0;
  max-width:520px;
}
.feature-card{
  padding:24px;
  border-radius:var(--radius);
}
.steps-grid{
  display:grid;
  grid-template-columns:repeat(3, minmax(0, 1fr));
  gap:22px;
}
.steps-grid .muted{
  color:var(--green);
  font-weight:600;
}
.step{
  display:flex;
  gap:12px;
  align-items:flex-start;
  padding:24px;
  border-radius:var(--radius);
  border:var(--card-border);
  background:var(--card-surface);
  box-shadow:var(--shadow);
}
@media (max-width: 640px){
  .step{ padding:18px; }
}
@media (max-width: 640px){
  .step{ padding:18px; }
}
.split-grid{
  display:grid;
  grid-template-columns:0.95fr 1.05fr;
  gap:34px;
  align-items:center;
}
.split-grid.spacious{
  gap:36px;
}
.two-col{
  display:grid;
  grid-template-columns:repeat(2, minmax(0, 1fr));
  gap:22px 32px;
}
.rating-grid{
  align-items:start;
}
.rating-card{
  display:flex;
  flex-direction:column;
  gap:14px;
  justify-content:center;
  background:var(--card-surface);
}
.rating-row{
  display:flex;
  align-items:center;
  gap:12px;
  flex-wrap:wrap;
}
.rating-score{
  font-weight:800;
  color:var(--ink);
}
.star-row{
  display:flex;
  gap:6px;
  align-items:center;
}
.star{
  --star-mask:url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='13' height='13' viewBox='0 0 13 13' shape-rendering='crispEdges'><rect x='6' y='0' width='1' height='1' fill='white'/><rect x='5' y='1' width='3' height='1' fill='white'/><rect x='4' y='2' width='5' height='1' fill='white'/><rect x='3' y='3' width='7' height='1' fill='white'/><rect x='2' y='4' width='9' height='1' fill='white'/><rect x='0' y='5' width='5' height='1' fill='white'/><rect x='8' y='5' width='5' height='1' fill='white'/><rect x='0' y='6' width='4' height='1' fill='white'/><rect x='9' y='6' width='4' height='1' fill='white'/><rect x='0' y='7' width='3' height='1' fill='white'/><rect x='10' y='7' width='3' height='1' fill='white'/><rect x='2' y='8' width='2' height='1' fill='white'/><rect x='9' y='8' width='2' height='1' fill='white'/><rect x='3' y='9' width='2' height='1' fill='white'/><rect x='8' y='9' width='2' height='1' fill='white'/><rect x='4' y='10' width='5' height='1' fill='white'/><rect x='5' y='11' width='3' height='1' fill='white'/><rect x='6' y='12' width='1' height='1' fill='white'/></svg>");
  width:24px;
  height:24px;
  position:relative;
  background-color:var(--star-empty);
  mask:var(--star-mask) no-repeat center / contain;
  -webkit-mask:var(--star-mask) no-repeat center / contain;
  image-rendering:pixelated;
  overflow:hidden;
}
.star-fill{
  position:absolute;
  inset:0;
  width:100%;
  height:100%;
  background-color:var(--star-fill);
  mask:var(--star-mask) no-repeat center / contain;
  -webkit-mask:var(--star-mask) no-repeat center / contain;
}
.star--half .star-fill{
  clip-path:inset(0 50% 0 0);
}
.testimonial-card{
  display:flex;
  flex-direction:column;
  gap:10px;
  border:var(--card-border);
  background:var(--card-surface);
  position:relative;
}
.testimonial-card::before{
  content:"";
  position:absolute;
  left:0;
  top:16px;
  bottom:16px;
  width:4px;
  border-radius:999px;
  background:linear-gradient(180deg, var(--green), rgba(15,118,110,0.1));
}
.testimonial-card blockquote{
  margin:0;
  font-size:16px;
  color:var(--ink);
  line-height:1.6;
  padding-left:10px;
}
.testimonial-author{
  font-size:13px;
  color:var(--text-muted);
  font-weight:700;
  padding-left:10px;
}
.achievement-grid{
  display:grid;
  grid-template-columns:repeat(2, minmax(0, 1fr));
  gap:22px;
}
.achievement-card{
  padding:18px 20px;
  border-radius:var(--radius);
  display:flex;
  align-items:flex-start;
  gap:12px;
  transition:transform .2s ease, box-shadow .2s ease, opacity .2s ease;
}
.achievement-grid--compact{
  gap:14px;
}
.achievement-card--compact{
  padding:14px 16px;
}
.achievement-card--compact .achievement-title{
  font-size:14px;
}
.achievement-card--compact .muted{
  font-size:12px;
  line-height:1.4;
}
.achievement-card--locked{
  opacity:0.35;
  filter:grayscale(0.5);
  background:rgba(255,255,255,0.65);
  border:1px solid rgba(15,118,110,0.12);
  box-shadow:none;
}
.achievement-card--locked .achievement-icon{
  background:rgba(15,118,110,0.45);
}
.achievement-card--earned{
  opacity:1;
  transform:translateY(-2px);
  border:1px solid rgba(15,118,110,0.35);
  box-shadow:0 12px 28px rgba(15,118,110,0.2);
}
.achievement-note{
  margin-top:14px;
  font-size:12px;
}
.achievement-title{
  display:block;
  font-weight:800;
  color:var(--ink);
  margin-bottom:6px;
}
.achievement-icon{
  width:22px;
  height:22px;
  background:var(--green);
  mask:url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'><rect x='2' y='7' width='2' height='2' fill='black'/><rect x='4' y='9' width='2' height='2' fill='black'/><rect x='6' y='11' width='2' height='2' fill='black'/><rect x='8' y='9' width='2' height='2' fill='black'/><rect x='10' y='7' width='2' height='2' fill='black'/><rect x='12' y='5' width='2' height='2' fill='black'/></svg>") no-repeat center / contain;
  -webkit-mask:url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'><rect x='2' y='7' width='2' height='2' fill='black'/><rect x='4' y='9' width='2' height='2' fill='black'/><rect x='6' y='11' width='2' height='2' fill='black'/><rect x='8' y='9' width='2' height='2' fill='black'/><rect x='10' y='7' width='2' height='2' fill='black'/><rect x='12' y='5' width='2' height='2' fill='black'/></svg>") no-repeat center / contain;
  flex-shrink:0;
}
.achievement-rank{
  margin-left:auto;
  font-size:13px;
  color:var(--orange);
  letter-spacing:0.1em;
  font-weight:800;
}
.media-placeholder{
  border:1px dashed var(--border);
  border-radius:18px;
  background:#f6faf7;
  padding:20px;
  display:flex;
  align-items:center;
  justify-content:center;
  flex-direction:column;
  gap:6px;
  text-align:center;
  min-height:180px;
}
.media-placeholder strong{
  font-size:12px;
  letter-spacing:0.08em;
  text-transform:uppercase;
}
.media-placeholder-lg{
  min-height:300px;
}
.media-placeholder-xl{
  min-height:320px;
}

/* ================= SCROLL FORM ================= */
.scroll-card{
  position:relative;
  background:
    linear-gradient(180deg, rgba(255,252,245,0.96), rgba(243,230,205,0.96)),
    repeating-linear-gradient(0deg, rgba(124,95,61,0.04) 0 2px, transparent 2px 8px);
  border:2px solid rgba(110,82,48,0.65);
  box-shadow:
    inset 0 2px 0 rgba(255,255,255,0.6),
    inset 0 -6px 18px rgba(110,82,48,0.12),
    0 24px 50px rgba(15,23,42,0.14);
  border-radius:24px;
}
.scroll-card::before,
.scroll-card::after{
  content:"";
  position:absolute;
  width:46px;
  height:46px;
  background:
    linear-gradient(135deg, #D7C2A1, #A88456),
    radial-gradient(circle at 30% 30%, rgba(255,255,255,0.55), transparent 55%);
  border:2px solid rgba(110,82,48,0.7);
  border-radius:12px;
  top:-18px;
  box-shadow:0 6px 14px rgba(15,23,42,0.18);
}
.scroll-card::before{ left:-14px; }
.scroll-card::after{ right:-14px; }
.scroll-title{
  display:flex;
  align-items:baseline;
  gap:12px;
  text-transform:uppercase;
  letter-spacing:0.18em;
  font-weight:800;
  color:#6B4E2E;
  font-size:13px;
}
.scroll-title-text{
  font-size:16px;
  color:#3D2B1F;
  letter-spacing:0.14em;
}
.scroll-divider{
  height:2px;
  width:100%;
  margin:12px 0 20px;
  background:linear-gradient(90deg, rgba(124,95,61,0), rgba(124,95,61,0.6), rgba(124,95,61,0));
  position:relative;
}
.scroll-divider::after{
  content:"";
  position:absolute;
  left:50%;
  top:-6px;
  width:12px;
  height:12px;
  transform:translateX(-50%) rotate(45deg);
  border:2px solid rgba(124,95,61,0.6);
  background:#F7F1E4;
}
.scroll-card .input,
.scroll-card .textarea,
.scroll-card .select{
  background:#FFFDF8;
  border-color:rgba(124,95,61,0.25);
}
.scroll-card .field-label{
  color:#4B3621;
  font-weight:800;
}
.scroll-card .field-help{
  color:#7B6A54;
}
.scroll-usage{
  border:1px solid rgba(124,95,61,0.35);
  background:#FFF7E8;
  box-shadow:none;
}
.scroll-card .btn-primary{
  background:linear-gradient(180deg, #4E7C5E, #2D5E44);
  border:2px solid #1C3F2C;
  color:#F8FAFC;
  box-shadow:0 6px 0 rgba(12,31,22,0.5);
  border-radius:12px;
  text-transform:uppercase;
  letter-spacing:0.06em;
}
.scroll-card .btn-primary:hover{
  background:linear-gradient(180deg, #5A8B6A, #2F684A);
}
.scroll-card .btn-outline{
  background:linear-gradient(180deg, #D9D2C4, #BFAF95);
  border:2px solid #8A7456;
  color:#3B2B1F;
  box-shadow:0 5px 0 rgba(85,66,47,0.4);
  border-radius:12px;
  text-transform:uppercase;
  letter-spacing:0.06em;
}
.scroll-card .btn-outline:hover{
  background:linear-gradient(180deg, #E2DACB, #C7B79B);
}
.cta-slab{
  text-align:center;
}
.cta-slab--glow{
  background:transparent;
  border:none;
}
@media (max-width: 900px){
  .hero-grid,
  .split-grid,
  .steps-grid,
  .two-col,
  .path-grid,
  .mode-grid,
  .achievement-grid,
  .inventory-grid{
    grid-template-columns:1fr;
  }
  .hero-media{
    min-height:240px;
  }
  .quest-panel{
    padding:28px;
  }
}

/* ================= HOW IT WORKS ================= */
.how-card{
  padding:36px;
}
.how-grid{
  display:grid;
  grid-template-columns:1.1fr 0.9fr;
  gap:32px;
  align-items:center;
}
.how-copy{
  gap:20px;
}
.how-steps{
  gap:16px;
}
.how-step{
  display:flex;
  align-items:flex-start;
  gap:12px;
}
.how-step p{
  margin:6px 0 0;
  max-width:520px;
}
.how-visual{
  display:flex;
  justify-content:center;
}
.rogue-hero{
  width:100%;
  max-width:240px;
  height:auto;
  image-rendering:pixelated;
}
@media (max-width: 900px){
  .how-grid{ grid-template-columns:1fr; }
  .how-visual{ order:-1; }
}

/* ================= LEADERBOARD ================= */
.leaderboard-card{
  padding:28px;
}
.leaderboard-altar{
  background:#F6F1EA;
  border:2px solid #2A163D;
  box-shadow:
    0 0 0 4px rgba(255,255,255,0.7),
    10px 10px 0 rgba(42,22,61,0.25);
  position:relative;
  overflow:hidden;
}
.leaderboard-altar::before{
  content:"";
  position:absolute;
  inset:10px;
  border:1px solid rgba(42,22,61,0.22);
  pointer-events:none;
}
.leaderboard-altar::after{
  content:"";
  position:absolute;
  inset:0;
  background-image:url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='80' height='80' viewBox='0 0 80 80'><rect width='80' height='80' fill='none'/><path d='M14 16h8v2h-6v6h-2zM58 16h8v8h-2v-6h-6zM14 56h2v6h6v2h-8zM64 56h2v8h-8v-2h6z' stroke='%232A163D' stroke-width='1' fill='none' opacity='0.5'/><path d='M40 10l4 4-4 4-4-4zM40 62l4 4-4 4-4-4zM10 40l4-4 4 4-4 4zM62 40l4-4 4 4-4 4z' fill='%232A163D' opacity='0.35'/></svg>");
  background-size:80px 80px;
  opacity:0.08;
  pointer-events:none;
}
.leaderboard-head{
  display:flex;
  align-items:flex-end;
  justify-content:space-between;
  gap:16px;
  flex-wrap:wrap;
}
.leaderboard-meta{
  display:flex;
  align-items:center;
  gap:12px;
  flex-wrap:wrap;
}
.leaderboard-badge{
  display:inline-flex;
  align-items:center;
  gap:6px;
  padding:6px 12px;
  border-radius:8px;
  background:#F9F4E6;
  color:#2A163D;
  border:1px solid rgba(42,22,61,0.25);
  font-weight:700;
  font-size:12px;
  text-transform:uppercase;
  letter-spacing:0.12em;
}
.leaderboard-note{
  font-size:12px;
  color:var(--text-muted);
}
.leaderboard-table{
  margin-top:18px;
  display:flex;
  flex-direction:column;
  gap:18px;
}
.leaderboard-row{
  display:grid;
  grid-template-columns:64px minmax(0, 1fr) 150px;
  align-items:center;
  gap:16px;
  padding:12px 16px;
  border:1px solid rgba(42,22,61,0.2);
  border-radius:14px;
  background:#FFFDF8;
  position:relative;
  box-shadow:inset 0 1px 0 rgba(255,255,255,0.9), 6px 6px 0 rgba(42,22,61,0.12);
}
.leaderboard-row::after{
  content:"";
  position:absolute;
  left:24px;
  right:24px;
  bottom:-9px;
  height:14px;
  background-image:url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='120' height='14' viewBox='0 0 120 14'><rect width='120' height='14' fill='none'/><path d='M2 7h116' stroke='%232A163D' stroke-width='1' stroke-dasharray='6 6' opacity='0.35'/><path d='M60 2l5 5-5 5-5-5z' fill='%232A163D' opacity='0.4'/></svg>");
  background-repeat:repeat-x;
  background-position:center;
  opacity:0.45;
  pointer-events:none;
}
.leaderboard-row:last-child::after{
  display:none;
}
.leaderboard-row.is-you{
  border-color:rgba(42,22,61,0.4);
  box-shadow:inset 0 1px 0 rgba(255,255,255,0.9), 6px 6px 0 rgba(42,22,61,0.16);
}
.leaderboard-row.is-top-1 .leaderboard-rank,
.leaderboard-row.is-top-1 .leaderboard-name-text,
.leaderboard-row.is-top-1 .leaderboard-count{
  color:#9D6B00;
}
.leaderboard-row.is-top-2 .leaderboard-rank,
.leaderboard-row.is-top-2 .leaderboard-name-text,
.leaderboard-row.is-top-2 .leaderboard-count{
  color:#6B7280;
}
.leaderboard-row.is-top-3 .leaderboard-rank,
.leaderboard-row.is-top-3 .leaderboard-name-text,
.leaderboard-row.is-top-3 .leaderboard-count{
  color:#9A5A2A;
}
.leaderboard-row.is-top-1{
  border-color:#C8A55B;
  box-shadow:inset 0 1px 0 rgba(255,255,255,0.9), 0 0 14px rgba(200,165,91,0.3), 8px 8px 0 rgba(42,22,61,0.12);
}
.leaderboard-row.is-top-2{
  border-color:#B9C2CF;
  box-shadow:inset 0 1px 0 rgba(255,255,255,0.9), 0 0 12px rgba(185,194,207,0.35), 8px 8px 0 rgba(42,22,61,0.12);
}
.leaderboard-row.is-top-3{
  border-color:#C98C5E;
  box-shadow:inset 0 1px 0 rgba(255,255,255,0.9), 0 0 12px rgba(201,140,94,0.3), 8px 8px 0 rgba(42,22,61,0.12);
}
.leaderboard-rank{
  font-family:var(--font-display), var(--font-body), sans-serif;
  font-weight:900;
  color:var(--ink);
  letter-spacing:0.02em;
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:6px;
}
.leaderboard-rank-text{
  font-weight:900;
}
.leaderboard-sigil{
  width:28px;
  height:28px;
  border-radius:50%;
  background:#F5E7C6;
  border:2px solid #2A163D;
  box-shadow:inset 0 0 0 2px rgba(255,255,255,0.7), 0 4px 0 rgba(42,22,61,0.2);
  position:relative;
}
.leaderboard-sigil::before{
  content:"";
  position:absolute;
  inset:4px;
  background-image:url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path d='M12 2l4 4-4 4-4-4zM6 12l6-6 6 6-6 6zM12 16l4 4-4 4-4-4z' fill='none' stroke='%232A163D' stroke-width='2' stroke-linejoin='bevel'/></svg>");
  background-repeat:no-repeat;
  background-position:center;
  background-size:contain;
  opacity:0.9;
}
.leaderboard-name{
  display:flex;
  align-items:center;
  gap:10px;
  min-width:0;
}
.leaderboard-avatar{
  width:32px;
  height:32px;
  border-radius:10px;
  border:1px solid rgba(42,22,61,0.3);
  box-shadow:0 2px 0 rgba(42,22,61,0.2);
}
.leaderboard-name-text{
  font-weight:700;
  color:var(--ink);
  overflow:hidden;
  text-overflow:ellipsis;
  white-space:nowrap;
}
.leaderboard-you{
  padding:4px 10px;
  border-radius:999px;
  background:#EFE6D6;
  color:#2A163D;
  border:1px solid rgba(42,22,61,0.25);
  font-weight:700;
  font-size:11px;
  letter-spacing:0.04em;
}
.leaderboard-count{
  text-align:right;
  font-weight:800;
  color:var(--ink);
}
.leaderboard-count-label{
  display:block;
  font-size:11px;
  color:var(--text-muted);
  font-weight:600;
  letter-spacing:0.04em;
  text-transform:uppercase;
}
.leaderboard-empty{
  margin-top:18px;
  padding:18px;
  border-radius:12px;
  border:1px dashed rgba(42,22,61,0.3);
  background:#FFFDF8;
}
.leaderboard-empty-actions{
  margin-top:14px;
  display:flex;
  flex-wrap:wrap;
  gap:14px;
  align-items:center;
}
.leaderboard-empty-link{
  font-weight:700;
  color:#2A163D;
  text-decoration:none;
  border-bottom:1px dashed rgba(42,22,61,0.45);
  padding-bottom:2px;
}
.leaderboard-empty-link:hover{
  color:#1C1029;
  border-bottom-color:rgba(42,22,61,0.75);
}
.leaderboard-foot{
  margin-top:18px;
  display:flex;
  flex-direction:column;
  gap:6px;
}
.leaderboard-rank-number{
  color:var(--ink);
}
@media (max-width: 720px){
  .leaderboard-row{
    grid-template-columns:48px minmax(0, 1fr);
  }
  .leaderboard-count{
    text-align:left;
  }
}

.leaderboard-row.is-top-1 .leaderboard-sigil{
  background:#F4E0AA;
  border-color:#C8A55B;
  animation:runeGlow 3.6s ease-in-out infinite;
}
.leaderboard-row.is-top-2 .leaderboard-sigil{
  background:#E6E8EE;
  border-color:#B9C2CF;
  animation:runeGlow 4.2s ease-in-out infinite;
}
.leaderboard-row.is-top-3 .leaderboard-sigil{
  background:#F0D2B0;
  border-color:#C98C5E;
  animation:runeGlow 4.8s ease-in-out infinite;
}
.leaderboard-row.is-top-1 .leaderboard-rank-text,
.leaderboard-row.is-top-2 .leaderboard-rank-text,
.leaderboard-row.is-top-3 .leaderboard-rank-text{
  text-shadow:0 0 12px rgba(42,22,61,0.25);
}
@keyframes runeGlow{
  0%, 100%{
    box-shadow:inset 0 0 0 2px rgba(255,255,255,0.7), 0 4px 0 rgba(42,22,61,0.2);
  }
  50%{
    box-shadow:inset 0 0 0 2px rgba(255,255,255,0.7), 0 0 12px rgba(200,165,91,0.45);
  }
}

/* ================= FULL-BLEED ================= */
.bleed{ width:100vw; margin-left:calc(50% - 50vw); margin-right:calc(50% - 50vw); }

/* ================= BANNER ================= */
.banner{ background:#efe2d4; padding:36px 0; border-bottom:2px solid #111; }
.banner-inner{ max-width:var(--maxw); margin:0 auto; padding:0 24px; }
.banner-img{ width:100%; height:auto; display:block; }

/* ================= HERO ================= */
.hero-wrap{
  position:relative;
  background:#fff;
  overflow:hidden;
}
.hero-wrap::after{ display:none; }
@keyframes hero-drift{ 0%{ transform:translateY(0) } 100%{ transform:translateY(-64px) } }
@media (prefers-reduced-motion: reduce){ .hero-wrap::after{ animation:none; } }

.hero{
  display:grid;
  grid-template-columns:1.05fr .95fr;
  grid-template-rows:auto 1fr;
  gap:calc(36px * var(--ui-scale));
  align-items:center;
  padding:calc(72px * var(--ui-scale)) 0 calc(56px * var(--ui-scale));
  max-width:var(--maxw);
  margin:0 auto;
  padding-left:calc(24px * var(--ui-scale)); padding-right:calc(24px * var(--ui-scale));
}
.hero > .hero-title{
  grid-column:1 / -1; margin:0 0 10px;
  line-height:1.1; font-weight:900;
  font-size:clamp(calc(40px * var(--ui-scale)), calc(5.6vw * var(--ui-scale)), calc(64px * var(--ui-scale)));
  white-space:normal;
}
.hero img{ width:100%; max-height:420px; object-fit:cover; border-radius:16px; }
.hero .split__frame{ padding:12px; border-radius:22px; }
.hero .split__title{ font-size:clamp(calc(40px * var(--ui-scale)), calc(5.6vw * var(--ui-scale)), calc(64px * var(--ui-scale))); }
.hero .split__lead{ font-size:clamp(calc(16px * var(--ui-scale)), calc(1.6vw * var(--ui-scale)), calc(20px * var(--ui-scale))); }
@media (max-width: 820px){
  .hero{ grid-template-columns:1fr; grid-template-rows:auto auto auto; gap:20px; }
  .hero > .hero-title{ white-space:normal; }
}

.hero-divider{ display:block; width:100%; height:56px; position:relative; margin-top:-20px; }

/* ================= SPLIT SECTIONS (two-column) ================= */
.split-wrap{ /* optional full-bleed background wrapper */
  width:100vw;
  margin-left:calc(50% - 50vw);
  margin-right:calc(50% - 50vw);
}
.split-wrap.tinted{ background:var(--green-soft); }
.split-wrap.dark{ background:#2b1e14; color:#fff; }

.split{
  display:grid;
  grid-template-columns:1.05fr .95fr;
  gap:calc(40px * var(--ui-scale));
  align-items:center;
  max-width:var(--maxw);
  margin:0 auto;
  padding:calc(80px * var(--ui-scale)) calc(24px * var(--ui-scale));
}
.split__title{ font-size:clamp(calc(32px * var(--ui-scale)), calc(4vw * var(--ui-scale)), calc(44px * var(--ui-scale))); line-height:1.15; margin:0 0 10px; font-weight:900; }
.split__lead{ margin:0 0 14px; opacity:.92; }
.split__bullets{ list-style:none; padding:0; margin:12px 0 0; }
.split__bullets li{ display:flex; gap:10px; align-items:flex-start; margin:8px 0; }
.split__dot{ width:8px; height:8px; background:var(--orange); border-radius:999px; margin-top:9px; flex:0 0 8px; }

.split__visual{
  position:relative;
}
.split__frame{ background:#fff; border-radius:22px; border:1px solid var(--border); box-shadow:none; padding:14px; }
.split__frame img{ width:100%; height:auto; display:block; border-radius:16px; object-fit:cover; }

.value-wrap{ background:var(--green-soft); }
.value{ max-width:var(--maxw); margin:0 auto; padding:calc(72px * var(--ui-scale)) calc(24px * var(--ui-scale)); }
.value h2{ font-size:clamp(calc(32px * var(--ui-scale)), calc(4.2vw * var(--ui-scale)), calc(48px * var(--ui-scale))); margin:0 0 8px; font-weight:900; color:var(--brown); }
.value__grid{ display:grid; grid-template-columns:repeat(auto-fit, minmax(220px, 1fr)); gap:calc(20px * var(--ui-scale)); margin-top:calc(20px * var(--ui-scale)); }
.value__item{ background:#fff; border:1px solid var(--border); border-radius:18px; padding:calc(18px * var(--ui-scale)); box-shadow:none; }
.value__icon{ width:calc(40px * var(--ui-scale)); height:calc(40px * var(--ui-scale)); display:flex; align-items:center; justify-content:center; border-radius:999px; background:#FFF2E5; border:1px solid #f4d8be; font-size:calc(20px * var(--ui-scale)); margin-bottom:calc(10px * var(--ui-scale)); }
.value__title{ font-weight:900; margin-bottom:6px; }

.split--reverse .split__copy{ order:2; }
.split--reverse .split__visual{ order:1; }

@media (max-width: 900px){
  .split{ grid-template-columns:1fr; padding:56px 20px; }
  .split--reverse .split__copy{ order:1; }
  .split--reverse .split__visual{ order:2; }
}

/* =================  TICKER ================= */
.ticker{ background:var(--green); color:#fff; width:100vw; overflow:hidden; display:block; }
.ticker__mask{ position:relative; width:100%; overflow:hidden; }
.ticker__track{ display:inline-flex; width:max-content; animation:none; }
.ticker__row{ display:inline-flex; gap:clamp(calc(40px * var(--ui-scale)), calc(6vw * var(--ui-scale)), calc(140px * var(--ui-scale))); padding:clamp(calc(14px * var(--ui-scale)), calc(2.4vw * var(--ui-scale)), calc(26px * var(--ui-scale))) clamp(calc(32px * var(--ui-scale)), calc(4vw * var(--ui-scale)), calc(56px * var(--ui-scale))); white-space:nowrap; }
.ticker__item{ font-weight:800; font-size:clamp(calc(18px * var(--ui-scale)), calc(2.4vw * var(--ui-scale)), calc(28px * var(--ui-scale))); line-height:1; }
@media (prefers-reduced-motion: reduce){ .ticker__track{ animation:none } }

/* ================= FEATURES ================= */
.section .grid3{ display:grid; grid-template-columns:repeat(auto-fit, minmax(var(--feature-minw), 1fr)); gap:var(--feature-gap); align-items:stretch; grid-auto-rows:minmax(var(--feature-minh), auto); }
.section .feature{ display:flex; flex-direction:column; gap:12px; padding:var(--feature-pad); border-radius:22px; box-shadow:none; background:#fff; font-size:18px; line-height:1.7; min-height:var(--feature-minh); transition:none; border:1px solid var(--border); }
.section .feature:hover{ transform:none; box-shadow:none }
.section .feature h4{ font-size:28px; font-weight:800; margin:0 0 12px; }
.section .feature p{ font-size:18px; margin:0; color:var(--brown); opacity:.9; }

@media (max-width: 900px){ .section .grid3{ grid-template-columns:repeat(2, minmax(260px, 1fr)); } }
@media (max-width: 600px){ .section .grid3{ grid-template-columns:1fr; } }

/* ================= PRACTICE CARD ================= */
.sticky-tools { margin-top:12px; margin-bottom:24px; }

.demo-grid{
  display:flex;
  justify-content:center;
  align-items:stretch;
  gap:40px;
  flex-wrap:wrap;
  margin-top:24px;
  margin-bottom:56px;
}

.demo-party .demo-layout{
  display:flex;
  flex-direction:column;
  gap:22px;
  max-width:980px;
  margin:0 auto;
}
.party-quiz-layout{
  display:flex;
  flex-direction:column;
  gap:22px;
  max-width:980px;
  margin:0 auto;
}
.party-question-card{
  border:2px solid rgba(42,22,61,0.65);
  background:#fff;
  box-shadow:8px 8px 0 rgba(42,22,61,0.15);
}
.party-meta{
  display:flex;
  align-items:center;
  flex-wrap:wrap;
  gap:10px;
}
.party-question-text{
  font-size:clamp(calc(24px * var(--ui-scale)), calc(3.2vw * var(--ui-scale)), calc(34px * var(--ui-scale)));
  line-height:1.4;
  color:var(--ink);
  margin:0;
}
.party-options{
  display:flex;
  flex-direction:column;
  gap:12px;
  margin-top:16px;
}
.demo-option,
.party-option{
  width:100%;
  text-align:left;
  display:flex;
  gap:14px;
  align-items:flex-start;
  padding:16px 18px;
  border-radius:14px;
  border:2px solid rgba(42,22,61,0.35);
  background:#fff;
  color:var(--ink);
  font-size:17px;
  line-height:1.6;
  font-weight:500;
  cursor:pointer;
  transition:transform .12s ease, box-shadow .12s ease, border-color .12s ease;
}
.demo-option:hover,
.party-option:hover{
  border-color:#2A163D;
  box-shadow:0 6px 14px rgba(42,22,61,0.12);
  transform:translateY(-1px);
}
.demo-option:disabled,
.party-option:disabled{
  cursor:not-allowed;
  opacity:0.85;
}
.demo-option.is-selected,
.party-option.is-selected{
  border-color:#2A163D;
  box-shadow:0 0 0 2px rgba(42,22,61,0.15);
}
.demo-option.is-correct{
  border-color:#16A34A;
  background:#ECFDF5;
}
.party-option.is-correct{
  border-color:#16A34A;
  background:#ECFDF5;
  box-shadow:
    0 0 0 2px rgba(34,197,94,0.25),
    0 0 22px rgba(34,197,94,0.35);
}
.party-option.is-correct .party-option-letter{
  border-color:#16A34A;
  background:#DCFCE7;
  color:#166534;
}
.party-option.is-wrong{
  border-color:#EF4444;
  background:#FEF2F2;
  box-shadow:
    0 0 0 2px rgba(248,113,113,0.2),
    0 0 18px rgba(248,113,113,0.25);
}
.party-option.is-wrong .party-option-letter{
  border-color:#EF4444;
  background:#FEE2E2;
  color:#991B1B;
}
.demo-option.is-wrong{
  border-color:#EF4444;
  background:#FEF2F2;
}
.demo-option-letter,
.party-option-letter{
  width:30px;
  height:30px;
  border-radius:999px;
  border:1px solid #CBD5E1;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  font-weight:700;
  color:#0F172A;
  background:#F8FAFC;
  flex-shrink:0;
  font-family:var(--font-body), "Space Grotesk", sans-serif;
  letter-spacing:0;
  box-shadow:0 1px 0 rgba(15,23,42,0.08);
}
.demo-option-text,
.party-option-text{
  flex:1;
  font-weight:500;
}
.party-answer-card{
  border:2px solid rgba(42,22,61,0.2);
  background:#F8FAFC;
}
.party-host-card{
  border:2px solid rgba(42,22,61,0.45);
  background:#fff;
  box-shadow:6px 6px 0 rgba(42,22,61,0.12);
}
.party-scoreboard-card{
  border:2px solid rgba(42,22,61,0.65);
  background:#fff;
  box-shadow:10px 10px 0 rgba(42,22,61,0.18);
}
.party-scoreboard-head{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
  flex-wrap:wrap;
}
.party-scoreboard-note{
  text-align:center;
  margin-top:6px;
}
.lobby-shell{
  border:2px solid rgba(42,22,61,0.45);
  background:#fff;
  box-shadow:10px 10px 0 rgba(42,22,61,0.15);
}
.party-code-banner{
  margin-top:10px;
  display:inline-flex;
  align-items:center;
  gap:12px;
  padding:10px 16px;
  border-radius:999px;
  border:1px solid #CBD5E1;
  background:#F8FAFC;
  box-shadow:0 6px 14px rgba(15,23,42,0.08);
}
.party-code-label{
  font-size:12px;
  font-weight:800;
  letter-spacing:0.14em;
  text-transform:uppercase;
  color:#64748B;
}
.party-code-value{
  font-size:18px;
  font-weight:900;
  letter-spacing:0.2em;
  color:#0F172A;
}
.lobby-header{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:16px;
  flex-wrap:wrap;
}
.lobby-actions{
  display:flex;
  gap:12px;
  flex-wrap:wrap;
  align-items:center;
}
.lobby-meta{
  display:flex;
  gap:10px;
  flex-wrap:wrap;
  align-items:center;
}
.lobby-grid{
  display:grid;
  grid-template-columns:1.2fr 1fr;
  gap:18px;
  margin-top:6px;
}
.lobby-panel{
  border:1px solid rgba(42,22,61,0.2);
  background:#fff;
  box-shadow:none;
}
.lobby-panel.lobby-invite{
  padding:28px;
}
.lobby-panel-head{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
  flex-wrap:wrap;
  margin-bottom:16px;
}
.lobby-timer{
  min-width:200px;
}
.lobby-link{
  display:flex;
  gap:10px;
  align-items:center;
  flex-wrap:wrap;
  margin-top:14px;
}
.lobby-link .input{
  flex:1 1 240px;
}
.lobby-code-row{
  display:flex;
  gap:12px;
  align-items:center;
  flex-wrap:wrap;
  margin-top:6px;
}
.lobby-note{
  margin-top:14px;
  color:var(--text-muted);
  font-size:13px;
}
@media (max-width: 900px){
  .lobby-grid{
    grid-template-columns:1fr;
  }
  .lobby-code-row{
    align-items:stretch;
  }
  .lobby-link{
    align-items:stretch;
  }
  .lobby-link .btn{
    width:100%;
  }
}

/* ================= LOBBY (QUIZLET LIVE STYLE) ================= */
.lobby-bleed{
  position:relative;
  width:100vw;
  margin-left:calc(50% - 50vw);
  background:
    radial-gradient(circle at 20% 10%, rgba(16,185,129,0.22), transparent 40%),
    radial-gradient(circle at 80% 0%, rgba(52,211,153,0.18), transparent 45%),
    linear-gradient(180deg, #0b1b1a 0%, #0d2421 45%, #0f2a27 100%);
  border-radius:0;
  padding:56px 0 88px;
}
.lobby-shell--live{
  width:min(1200px, 94vw);
  max-width:1200px;
  margin:0 auto;
}
.lobby-shell--live{
  border:none;
  background:#eef0fb;
  box-shadow:0 24px 48px rgba(15,23,42,0.16);
  padding:26px;
}
.lobby-shell--live .lobby-topbar{
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  gap:16px;
  margin-bottom:16px;
}
.lobby-shell--live .lobby-kicker{
  font-weight:700;
  color:#4b5563;
  letter-spacing:0.02em;
}
.lobby-shell--live .lobby-sub{
  color:#6b7280;
  font-size:14px;
  margin-top:4px;
}
.lobby-shell--live .lobby-body{
  display:grid;
  grid-template-columns:260px 1fr;
  gap:20px;
}
.lobby-shell--live .lobby-sidebar{
  background:#ffffff;
  border-radius:18px;
  border:1px solid #e5e7eb;
  padding:18px;
  display:flex;
  flex-direction:column;
  gap:14px;
}
.lobby-shell--live .lobby-brand{
  font-weight:800;
  color:#111827;
  font-size:18px;
  font-family:var(--font-display), var(--font-body), sans-serif;
}
.lobby-shell--live .lobby-code-card{
  border:1px solid #e5e7eb;
  border-radius:14px;
  padding:12px;
  background:#f8fafc;
  display:flex;
  flex-direction:column;
  gap:10px;
}
.lobby-shell--live .lobby-code-label{
  font-size:12px;
  color:#64748b;
  text-transform:uppercase;
  letter-spacing:0.12em;
  font-weight:700;
}
.lobby-shell--live .lobby-code-value{
  font-size:22px;
  font-weight:900;
  letter-spacing:0.18em;
  color:#111827;
}
.lobby-shell--live .lobby-qr-card{
  border:1px dashed #cbd5f5;
  border-radius:16px;
  padding:12px;
  text-align:center;
  background:#f8fafc;
}
.lobby-shell--live .lobby-qr{
  width:168px;
  height:168px;
  margin:0 auto 8px;
  border-radius:12px;
  background:#fff;
  display:flex;
  align-items:center;
  justify-content:center;
}
.lobby-shell--live .lobby-qr img{
  width:150px;
  height:150px;
  object-fit:contain;
}
.lobby-shell--live .lobby-qr-caption{
  font-size:12px;
  color:#6b7280;
}
.lobby-shell--live .lobby-side-actions{
  display:flex;
  flex-direction:column;
  gap:10px;
}
.lobby-shell--live .lobby-stage{
  background:#f4f5ff;
  border-radius:18px;
  border:1px solid #e2e8f0;
  padding:18px;
  min-height:420px;
  position:relative;
  overflow:hidden;
}
.lobby-shell--live .lobby-stage-title{
  font-weight:700;
  color:#4b5563;
  margin-bottom:10px;
}
.lobby-shell--live .lobby-player-orbit{
  position:relative;
  width:100%;
  height:360px;
  display:block;
}
.lobby-shell--live .lobby-player{
  position:absolute;
  left:50%;
  top:50%;
  transform:
    translate(-50%, -50%)
    rotate(var(--angle))
    translate(min(32vw, 200px))
    rotate(calc(var(--angle) * -1));
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:6px;
}
.lobby-shell--live .lobby-player-avatar{
  width:48px;
  height:48px;
  border-radius:50%;
  border:2px solid #fff;
  box-shadow:0 6px 16px rgba(15,23,42,0.18);
  background:#fff;
  object-fit:contain;
}
.lobby-shell--live .lobby-player-name{
  font-size:12px;
  color:#4b5563;
  max-width:90px;
  text-align:center;
}
.lobby-shell--live .lobby-player.is-inactive{
  opacity:0.5;
}
@media (max-width: 980px){
  .lobby-shell--live .lobby-body{
    grid-template-columns:1fr;
  }
  .lobby-shell--live .lobby-sidebar{
    order:2;
  }
  .lobby-shell--live .lobby-stage{
    order:1;
  }
  .lobby-shell--live .lobby-player-orbit{
    height:280px;
  }
  .lobby-shell--live .lobby-player{
    transform:
      translate(-50%, -50%)
      rotate(var(--angle))
      translate(min(42vw, 160px))
      rotate(calc(var(--angle) * -1));
  }
}
.demo-question-card{
  border:2px solid rgba(42,22,61,0.65);
  background:#fff;
  box-shadow:8px 8px 0 rgba(42,22,61,0.15);
}
.demo-meta{
  display:flex;
  align-items:center;
  flex-wrap:wrap;
  gap:10px;
}
.demo-question-text{
  font-size:clamp(calc(24px * var(--ui-scale)), calc(3.2vw * var(--ui-scale)), calc(34px * var(--ui-scale)));
  line-height:1.4;
  color:var(--ink);
  margin:0;
}
.demo-options{
  display:flex;
  flex-direction:column;
  gap:12px;
  margin-top:16px;
}
.demo-answer-card{
  border:2px solid rgba(42,22,61,0.2);
  background:#F8FAFC;
}
.demo-host-card{
  border:2px solid rgba(42,22,61,0.45);
  background:#fff;
  box-shadow:6px 6px 0 rgba(42,22,61,0.12);
}
.demo-host-actions{
  justify-content:flex-start;
}
.demo-scoreboard-card{
  border:2px solid rgba(42,22,61,0.65);
  background:#fff;
  box-shadow:10px 10px 0 rgba(42,22,61,0.18);
}
.demo-scoreboard-head{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
  flex-wrap:wrap;
}
.demo-scoreboard-note{
  text-align:center;
  margin-top:6px;
}
.badge-gain{
  background:rgba(22,163,74,0.18);
  border:1px solid rgba(22,163,74,0.4);
  color:#166534;
}
.badge-gain--muted{
  opacity:0.7;
}

.demo-card{
  width:100%;
  max-width:1080px;   /* was 880px */
  min-height:680px;   /* was 560px */
  margin:56px auto;   /* was 48px auto */
  background:#fff;
  border:1px solid var(--border);
  border-radius:28px; /* was 26px */
  box-shadow:none;
  padding:64px 72px;  /* was 56px 64px */
  text-align:left;
}

.demo-pill{
  width:min(800px, 100%); /* was 640px */
  background:var(--green-soft);
  border-radius:999px;
  padding:18px 22px;   /* was 16px 20px */
  margin:0 auto 20px;  /* was 16px */
  font-weight:800;
  text-align:center;
  font-size:24px;      /* was 22px */
}

.demo-q{
  margin:24px 0 30px;  /* was 18px 0 26px */
  font-size:24px;      /* was 22px */
  line-height:1.6;     /* was 1.5 */
  text-align:center;
  color:var(--brown);
  font-weight:700;
}

.demo-options{ list-style:none; padding:0; margin:28px auto 0; max-width:800px; } /* was 720px */
.demo-option{
  display:flex;
  gap:14px;            /* was 12px */
  align-items:flex-start;
  font-size:22px;      /* was 20px */
  line-height:1.7;     /* was 1.6 */
  padding:14px 16px;   /* was 12px 14px */
  border-radius:16px;  /* was 14px */
  border:1px solid var(--border);
  background:#fff;
  transition:none;
}
.demo-option + .demo-option{ margin-top:12px; } /* was 10px */
.demo-option:hover{ background:var(--green-soft); border-color:var(--border); box-shadow:none; }
.opt-label{ font-weight:800; margin-right:10px; min-width:auto; text-align:left; }
.opt-text{ flex:1; }

/* difficulty pill */
.diff-pill{
  display:inline-flex; align-items:center; gap:8px;
  padding:6px 10px; border-radius:999px; font-size:12px; font-weight:800;
  border:1px solid #f4d8be; background:#fff7ee; color:#8a4f2f;
}
.diff-pill .dot{ width:8px; height:8px; border-radius:999px; background:#bbb; }
.diff-pill.easy .dot{ background:#54a46e; }
.diff-pill.medium .dot{ background:#f3a13b; }
.diff-pill.hard .dot{ background:#d15b4f; }

/* QC layout */
.qc-wrap{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:20px;               /* was 16px */
  max-width:800px;        /* was 720px */
  margin:0 auto 24px;     /* was 18px */
}
.qc-col{ text-align:left; }
.qc-title{
  font-weight:900; font-size:14px; /* was 13px */
  letter-spacing:.5px;
  color:#8a4f2f; text-transform:uppercase; margin:0 0 8px;
}
.qc-box{
  border:1px solid var(--border);
  border-radius:16px;  /* was 14px */
  padding:18px 20px;   /* was 14px 16px */
  background:#fff;
  min-height:72px;     /* was 64px */
  box-shadow:none;
}
.qc-wrap + .demo-options{ margin-top:16px; } /* was 12px */

@media (max-width: 820px){
  .demo-card{ padding:32px 26px; min-height:0; }
  .demo-q{ font-size:22px; }
  .demo-options{ max-width:100%; }
.qc-wrap{ grid-template-columns:1fr; }
}

/* ================= LIFESTYLE ================= */
.lifestyle{ display:grid; grid-template-columns:1fr 0.9fr; gap:24px; align-items:center; }
.lifestyle-text h3{ font-size:clamp(calc(32px * var(--ui-scale)), calc(4vw * var(--ui-scale)), calc(46px * var(--ui-scale))); margin-bottom:12px; }
.lifestyle-text p{ font-size:clamp(calc(18px * var(--ui-scale)), calc(2vw * var(--ui-scale)), calc(22px * var(--ui-scale))); line-height:1.6; }
.lifestyle-image img{ width:67.5%; max-height:320px; object-fit:cover; border-radius:var(--radius); margin:0 auto; }

/* ================= MISC / PRICING ================= */
.row{ display:flex; gap:calc(16px * var(--ui-scale)); flex-wrap:wrap; justify-content:center; }
.cta-row{ justify-content:flex-start; }
@media (max-width: 640px){
  .cta-row{
    flex-direction:column;
    align-items:stretch;
  }
  .cta-row .btn{
    width:100%;
    text-align:center;
  }
}
.section{ padding:calc(80px * var(--ui-scale)) 0 } .center{ text-align:center }
@media (max-width: 640px){ .section{ padding:calc(56px * var(--ui-scale)) 0; } }
.section.center h2{ font-size:clamp(calc(36px * var(--ui-scale)), calc(5vw * var(--ui-scale)), calc(60px * var(--ui-scale))); font-weight:800; margin-bottom:12px; color:var(--brown); }

.pricing{ padding:80px 0; text-align:center; }
.pricing .sub{ margin-top:6px; opacity:.85; }
.pricing-grid{ display:grid; grid-template-columns:repeat(2, minmax(260px, 1fr)); gap:28px; max-width:1000px; margin:28px auto 0; align-items:stretch; }
@media (max-width: 640px){
  .pricing-grid{ grid-template-columns:1fr; gap:20px; }
}

.compare-grid{ margin-top:24px; }
.compare-card{
  text-align:left;
  border-radius:20px;
  padding:22px;
}
.compare-card--pro{
  background:var(--green-soft);
  border-color:rgba(15,118,110,0.25);
}
.compare-pill{
  display:inline-flex;
  align-items:center;
  gap:6px;
  padding:6px 12px;
  border-radius:999px;
  font-weight:800;
  font-size:12px;
  letter-spacing:0.08em;
  text-transform:uppercase;
  background:#fff;
  border:1px solid var(--border);
  color:var(--ink);
}
.compare-pill--pro{
  background:#e8fbf7;
  border-color:rgba(15,118,110,0.3);
  color:var(--green);
}
.compare-list{
  list-style:none;
  padding:0;
  margin:16px 0 0;
  display:grid;
  gap:10px;
}
.compare-item{
  display:flex;
  gap:10px;
  align-items:flex-start;
  color:var(--ink);
}
.compare-dot{
  width:8px;
  height:8px;
  border-radius:999px;
  background:var(--orange);
  margin-top:7px;
}
.compare-dot--pro{
  background:var(--green);
}

.plan{ position:relative; border-radius:28px; padding:28px 28px 32px; background:#fff; border:1px solid var(--border); box-shadow:none; transition:none; }
.plan:hover{ transform:none; box-shadow:none; border-color:var(--border); }
.plan--pro{ background:#fff; }

.rune-announcement{
  margin:24px auto 12px;
  max-width:860px;
  padding:28px 28px 26px;
  border-radius:22px;
  border:2px solid #2A163D;
  background:#F7F2EA;
  box-shadow:
    0 0 0 4px rgba(255,255,255,0.7),
    10px 10px 0 rgba(42,22,61,0.25);
  position:relative;
  overflow:hidden;
  text-align:center;
}
.rune-announcement::before{
  content:"";
  position:absolute;
  inset:8px;
  border:1px solid rgba(42,22,61,0.2);
  pointer-events:none;
}
.rune-announcement::after{
  content:"";
  position:absolute;
  inset:0;
  background-image:url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='120' height='60' viewBox='0 0 120 60'><rect width='120' height='60' fill='none'/><path d='M10 12h8v2h-6v6h-2zM102 12h8v8h-2v-6h-6zM10 44h2v6h6v2h-8zM108 44h2v8h-8v-2h6z' stroke='%232A163D' stroke-width='1' fill='none' opacity='0.4'/><path d='M60 8l4 4-4 4-4-4zM60 44l4 4-4 4-4-4z' fill='%232A163D' opacity='0.3'/></svg>");
  background-size:120px 60px;
  opacity:0.12;
  pointer-events:none;
}
.rune-kicker{
  display:inline-flex;
  align-items:center;
  gap:8px;
  padding:6px 12px;
  border-radius:999px;
  border:1px solid rgba(42,22,61,0.3);
  background:#F9F4E6;
  color:#2A163D;
  font-weight:800;
  letter-spacing:0.14em;
  text-transform:uppercase;
  font-size:11px;
}
.rune-title{
  margin:12px 0 8px;
  font-size:clamp(calc(32px * var(--ui-scale)), calc(4.8vw * var(--ui-scale)), calc(56px * var(--ui-scale)));
  font-weight:900;
  color:#2A163D;
  font-family:var(--font-display), var(--font-body), sans-serif;
  letter-spacing:0.04em;
  text-transform:uppercase;
}
.rune-sub{
  margin:0 auto 14px;
  max-width:560px;
  color:rgba(42,22,61,0.75);
}
.rune-seal{
  display:inline-flex;
  align-items:center;
  gap:10px;
  padding:8px 16px;
  border-radius:999px;
  border:2px solid #2A163D;
  background:#EFE6D6;
  color:#2A163D;
  font-weight:800;
  letter-spacing:0.08em;
  text-transform:uppercase;
  font-size:12px;
  position:relative;
}
.rune-seal::before{
  content:"";
  width:10px;
  height:10px;
  background:#2A163D;
  transform:rotate(45deg);
}

.plan--locked{
  border:2px solid #2A163D;
  background:#F7F2EA;
  box-shadow:
    0 0 0 3px rgba(255,255,255,0.6),
    8px 8px 0 rgba(42,22,61,0.18);
  overflow:hidden;
}
.plan--locked::after{
  content:"";
  position:absolute;
  inset:0;
  background-image:url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='120' height='120' viewBox='0 0 120 120'><rect width='120' height='120' fill='none'/><path d='M8 16h8v2h-6v6h-2zM104 16h8v8h-2v-6h-6zM8 96h2v6h6v2h-8zM110 96h2v8h-8v-2h6z' stroke='%232A163D' stroke-width='1' fill='none' opacity='0.4'/><path d='M60 10l6 6-6 6-6-6zM60 98l6 6-6 6-6-6z' fill='%232A163D' opacity='0.2'/></svg>");
  background-size:120px 120px;
  opacity:0.1;
  pointer-events:none;
}
.plan--locked .plan__badge{
  background:#2A163D;
  color:#F7E7C4;
  border:1px solid rgba(255,255,255,0.3);
}
.plan--locked .plan__dot{
  background:#2A163D;
}
.plan__coming{
  margin:6px 0 12px;
  font-size:clamp(calc(18px * var(--ui-scale)), calc(2.4vw * var(--ui-scale)), calc(24px * var(--ui-scale)));
  font-weight:900;
  letter-spacing:0.08em;
  text-transform:uppercase;
  color:#2A163D;
}
.plan__cta--disabled{
  background:#E8E0D4;
  color:#7C6A87;
  border:1px solid rgba(42,22,61,0.3);
  cursor:not-allowed;
  box-shadow:none;
}
.plan__cta--disabled:hover{
  background:#E8E0D4;
}

.plan__badge{ position:absolute; top:14px; right:16px; background:var(--orange); color:#fff; font-weight:800; padding:6px 12px; border-radius:999px; font-size:12px; letter-spacing:.4px; }
.plan__title{ font-size:28px; font-weight:900; margin:0 0 6px; }
.plan__price{ display:flex; align-items:flex-end; gap:6px; margin:10px 0 14px; justify-content:center; }
.plan__price .num{ font-size:40px; font-weight:900; }
.plan__price .per{ opacity:.8; margin-bottom:6px; }
.plan__blurb{ font-size:16px; opacity:.95; margin-bottom:16px; }
.plan__features{ list-style:none; padding:0; margin:0 0 22px; text-align:left; max-width:480px; margin-inline:auto; }
.plan__features li{ display:flex; gap:10px; align-items:flex-start; margin:8px 0; }
.plan__dot{ width:8px; height:8px; background:var(--orange); border-radius:999px; margin-top:9px; }

.plan__cta{ display:inline-flex; align-items:center; justify-content:center; padding:12px 18px; border-radius:999px; font-weight:800; background:var(--orange); color:#fff; text-decoration:none; transition:none; }
.plan__cta:hover{ transform:none; box-shadow:none; background:var(--green-hover); }

/* ================= REVEAL (scroll-in) ================= */
.reveal{ opacity:1; transform:none; transition:none; }
.reveal.is-visible{ opacity:1; transform:none; }

/* ================= METRICS ================= */
.metrics{ background:#fff; }
.metrics-inner{ max-width:var(--maxw); margin:0 auto; padding:56px 24px; display:grid; gap:24px; }
.metrics-grid{ display:grid; grid-template-columns:repeat(3, minmax(160px, 1fr)); gap:18px; }
.metric{ background:#fff; border:1px solid var(--border); border-radius:18px; padding:18px; text-align:center; box-shadow:none; }
.metric__num{ font-weight:900; font-size:clamp(calc(28px * var(--ui-scale)), calc(4vw * var(--ui-scale)), calc(42px * var(--ui-scale))); color:var(--brown); }
.metric__label{ margin-top:4px; opacity:.85; }
.metrics .sub{ text-align:center; opacity:.9; margin:0 0 4px; }
.metrics h3{ text-align:center; font-size:clamp(calc(28px * var(--ui-scale)), calc(4vw * var(--ui-scale)), calc(40px * var(--ui-scale))); margin:0; }

/* ===================== */
/*  Math Rendering        */
/* ===================== */
.katex, .mathjax-svg{
  -webkit-font-smoothing: antialiased;
  font-smooth: always;
  font-family: 'KaTeX_Main','Cambria Math','Latin Modern Math','STIX Two Math',serif;
}
.katex-display{
  margin: 14px 0;
  display: block;
  transform: scale(1.03);
  transform-origin: left top;
}
.rich-text .katex-display{ margin: 10px 0; }
.rich-text .katex{ font-size: 1.05em; }
.mathjax-pending{
  font-family: 'Cambria Math','Latin Modern Math','Times New Roman',serif;
  opacity: 0.9;
}
.mathjax-svg svg{
  max-width: 100%;
  height: auto;
}

/* ===================== */
/*  Loader (APPENDED)    */
/* ===================== */
.loader-wrap {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  min-height: 300px;
  text-align: center;
}

.loader-title {
  margin: 10px 0 6px;
  font-size: 22px;
  font-weight: 900;
  color: var(--brown);
}

.loader-sub {
  margin: 0;
  opacity: 0.8;
  font-size: 16px;
}

/* Bouncy bubbles animation */
.loader-bubbles {
  position: relative;
  height: 30px;
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 14px;
}
.loader-bubbles span {
  width: 14px;
  height: 14px;
  border-radius: 999px;
  background: var(--orange);
  display: inline-block;
  animation: none;
  box-shadow: none;
}
.loader-bubbles .b1 { animation-delay: 0s; }
.loader-bubbles .b2 { animation-delay: 0.12s; }
.loader-bubbles .b3 { animation-delay: 0.24s; }

@media (prefers-reduced-motion: reduce){ .loader-bubbles span{ animation:none; } }
